var WEB_STORAGE=function(){var e=function(){var e="check_storage";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}();return e&&(Storage.prototype.setObject=function(e,t){this.setItem(e,JSON.stringify(t))},Storage.prototype.getObject=function(e){var t=this.getItem(e);return t&&JSON.parse(t)}),{isAvailable:e}}(),FORM=function(w){var x={checkDirtyField:!1,cssClasses:{dirty:"dirty-field",error:"has-error",errorMultiChoice:"has-error-switch",valid:"is-valid"},focusOnRelated:!0,maxFileSize:10,onPastePrevented:null,onValidation:null,preventPasteFields:'[type="password"], [data-equal-to]',skipUIfeedback:!1,strictHtmlValidation:!1,validateOnEvents:"input change"},o={beforeSend:null,manageFileUpload:!0,onSubmitComplete:null,onSubmitError:null,onSubmitSuccess:null},C={cap:function(e){return/^[0-9]{5}$/.test(e)},date:function(e){return/^(0?[1-9]|[12][0-9]|3[01])([ \/\-.])(0?[1-9]|1[012])\2([0-9][0-9][0-9][0-9])(([ -])([0-1]?[0-9]|2[0-3]):[0-5]?[0-9]:[0-5]?[0-9])?$/.test(e)},email:function(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,})+$/.test(e)},fiscalCode:function(e){return/^(?:[B-DF-HJ-NP-TV-Z](?:[AEIOU]{2}|[AEIOU]X)|[AEIOU]{2}X|[B-DF-HJ-NP-TV-Z]{2}[A-Z]){2}[\dLMNP-V]{2}(?:[A-EHLMPR-T](?:[04LQ][1-9MNP-V]|[1256LMRS][\dLMNP-V])|[DHPS][37PT][0L]|[ACELMRT][37PT][01LM])(?:[A-MZ][1-9MNP-V][\dLMNP-V]{2}|[A-M][0L](?:[\dLMNP-V][1-9MNP-V]|[1-9MNP-V][0L]))[A-Z]$/i.test(e)},hexColor:function(e){return/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/.test(e)},landlineNumber:function(e){return/^((00|\+)\d{2}[\-\. ]??)??(((0[\d]{1,4}))([\/\-\. ]){0,1}([\d, ]{5,10}))$/.test(e)},mobileNumber:function(e){return/^((00|\+)??\d{2}[\-\. ]??)??3\d{2}[\-\. ]??(\d{6,7}|\d{2}[\-\. ]??\d{2}[\-\. ]??\d{3})$/.test(e)},number:function(e){return/[+-]?([0-9]*[.])?[0-9]+/.test(e)},numberFloat:function(e){return/[+-]?([0-9]*[.])[0-9]+/.test(e)},numberInteger:function(e){return/^\d+$/.test(e)},password:function(e){return/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{8,}$/.test(e)},url:function(e){return/^((https?|ftp|file):\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/.test(e)},username:function(e){return/^(?=\w)(?=[\-\.\@]?)[\w\-\.\@]{3,24}$/.test(e)},vatNumber:function(e){return/^(IT){0,1}[0-9]{11}$/i.test(e)}},c='input:not([type="reset"]):not([type="submit"]):not([type=button]):not([type=hidden]), select, textarea',O={exactLength:function(e,t){return e.length===1*t},max:function(e,t){return(e=1*e)<=1*t},maxlength:function(e,t){return e.length<=1*t},min:function(e,t){return 1*t<=(e=1*e)}},S=function(e,t){t=t||x.cssClasses.dirty;e.each(function(){var e=w(this);e.is('[type="checkbox"], [type="radio"]')||(e.val()?e.addClass(t):e.removeClass(t))})},q=function(e,n){var i=0<e.closest("form").length?e.closest("form"):e.closest("[data-formjs-question]"),t='[name="'+e.attr("name")+'"]';if(e.is('[type="radio"]')){var a=i.find(t+":checked"),r=i.find(t+"[data-require-more]"),s=!0;return 0<r.length&&r.each(function(e,t){var a=w(t),r=i.find('[data-required-from="#'+a.attr("id")+'"]');r.prop("required",!1),a.is(":checked")?(r.prop("required",!0),n.focusOnRelated?r.focus():a.is("[required]")&&0===r.val().trim().length&&(s=!1)):r.val("")}),!e.is("[required]")||0<a.length&&0<a.val().trim().length&&s}if(e.is('[type="checkbox"]')){if(0<e.closest("[data-max-check]").length){var o=e.closest("[data-max-check]").data("max-check"),l=i.find('[name="'+e.attr("name")+'"]:checked').length;return{isChecked:0<l&&l<=o,exceedMaxCheck:o<l}}return e.prop("checked")}},T=function(e){e=e||{};for(var t=1;t<arguments.length;t++){var a=arguments[t];if(a)for(var r in a)e.hasOwnProperty(r)&&"[object Array]"!==Object.prototype.toString.call(a[r])?"[object Object]"===Object.prototype.toString.call(a[r])&&(e[r]=T(e[r],a[r])):e[r]=a[r]}return e},l=function(e){var s={};return e.find("input, select, textarea").not('[type="reset"], [type="submit"], [type="button"], [type="file"], [data-exclude-json]').each(function(){var e=w(this),t=e.is('[type="checkbox"]'),a=e.is('[type="radio"]'),r=e.attr("name"),n=t?[]:e.val();if(t||a){var i=e.closest("form").find('[name="'+r+'"]:checked');a?n=0===i.length?null:i.val():i.each(function(){n.push(w(this).val())})}s[r]=n}),s},E=function(e,t){if(!e.length)return!1;var a=T(t||{},x),r=e.attr("type"),n=e.val().trim(),i=0<n.length,s=!1,o=0<e.closest("[data-max-check]").length,l=e.is("[required]"),d=e.is("[data-required-from]"),u=e.is("[data-validate-if-filled]"),c=i,f=e.closest("[data-formjs-question]"),p=e.closest("form").find('[data-equal-to="'+e.attr("name")+'"]');if(a.checkDirtyField&&S(e,a.cssClasses.dirty),!l&&!u&&!d&&"checkbox"!==r&&"radio"!==r||u&&!i)c=!0;else{if("checkbox"===r){var m=q(e,a);c=o?m.isChecked:m,s=!!o&&m.exceedMaxCheck}else if("file"===r&&0<a.maxFileSize)w.each(e[0].files,function(e,t){t.size/1024/1024>a.maxFileSize&&(c=!1)});else if("radio"===r)c=q(e,a);else{var v={},h=!0;if(e.is("[data-equal-to]")){var g=w('[name="'+e.data("equal-to")+'"]');c=n===g.val().trim(),h=!1}else{if(d){var y=w(e.data("required-from")),b=0<w('[name="'+y.attr("name")+'"]:checked').length;i&&(y.prop("checked",!0),e.prop("required",!0)),y.is(":checked")||(h=!1),c=y.is("[required]")&&y.is(":checked")?i:!y.is("[required]")||b}e.is("[data-exact-length]")&&(v.exactLength=e.data("exact-length")),e.is("[max]")&&(v.max=e.attr("max")),e.is("[maxlength]")&&(v.maxlength=e.attr("maxlength")),e.is("[min]")&&(v.min=e.attr("min"))}c=h?function(e,t){var a=e.is("[data-subtype]")?e.data("subtype").replace(/-([a-z])/gi,function(e,t){return t.toUpperCase()}):e.attr("type"),r=!0,n=e.val().trim();for(var i in t)O[i](n,t[i])||(r=!1);return("function"==typeof C[a]?C[a](n):0<n.length)&&r}(e,v):c}0<p.length&&E(p,a)}return 0<f.length&&(a.skipUIfeedback?f.removeClass(a.cssClasses.valid+" "+a.cssClasses.error+" "+a.cssClasses.errorMultiChoice):c?(f.removeClass(a.cssClasses.error).addClass(a.cssClasses.valid),o&&!s&&f.removeClass(a.cssClasses.errorMultiChoice)):(f.addClass(a.cssClasses.error).removeClass(a.cssClasses.valid),o&&s&&f.addClass(a.cssClasses.errorMultiChoice))),c},d=function(e,t){if(!e.length||!e.is("[novalidate]"))return!1;var o=T((t=t||{}).fieldOptions||{},x),l={fields:[],result:!0},d="",u="";return void 0===o.focusOnRelated&&(o.focusOnRelated=!1),e.find(c).each(function(e,t){var a=w(t),r=a.attr("name"),n=a.attr("type"),i={field:a,result:!0};if(r===d&&n===u)return!0;a.is("[data-required-from]")||(d=r,u=n);var s=E(a,o);(i.result=s)||(l.result=!1),l.fields.push(i)}),l},u=function(e,t){(t=void 0===t?{}:t).fieldOptions=T(t.fieldOptions||{},x),t.formOptions=T(t.formOptions||{},o);var a=d(e,t),r=e.find('[type="submit"]');if("function"==typeof t.fieldOptions.onValidation&&t.fieldOptions.onValidation(a.fields),!a.result||r.is(":disabled"))return!1;r.prop("disabled",!0);var n=l(e);if("function"==typeof t.formOptions.beforeSend){var i={formData:n,stopExecution:!1},s=t.formOptions.beforeSend(i,e);if("[object Object]"===Object.prototype.toString.call(s)&&(n=s.formData||n,s.stopExecution))return!1}!function(n,e,i){var s=n.find('[type="submit"]'),t={cache:!1,url:n.attr("action"),data:e,method:n.attr("method")||"POST",dataType:"json"};if(n.is('[enctype="multipart/form-data"]')&&i.formOptions.manageFileUpload){var o=new FormData;for(var a in t.data)o.append(a,t.data[a]);n.find('[type="file"]').each(function(e,r){r=r,w.each(r.files,function(e,t){var a=r.name+"["+e+"]";o.append(a,t,t.name)})}),t.contentType=!1,t.processData=!1,t.data=o}if(n.is("[data-ajax-settings]")){var r=n.data("ajax-settings");try{t=T(r,t)}catch(e){return console.error("data-ajax-settings specified for "+n.attr("name")+" form is not a valid JSON object!")}}w.ajax(t).always(function(e,t,a){if(s.prop("disabled",!1),"function"==typeof i.formOptions.onSubmitComplete){var r={dataOrXHR:e,status:t,XHRorResponse:a};i.formOptions.onSubmitComplete(r,n)}}).done(function(e,t,a){if("function"==typeof i.formOptions.onSubmitSuccess){var r={data:e,status:t,response:a};i.formOptions.onSubmitSuccess(r,n)}}).fail(function(e,t,a){if("function"==typeof i.formOptions.onSubmitError){var r={errorThrown:a,status:t,response:e};i.formOptions.onSubmitError(r,n)}})}(e,n,t)};return{addValidationRules:function(e){C=T(e,C)},getFormJSON:l,init:function(){var e=arguments.length,t=w.isPlainObject(arguments[0]),a=2===e||0<e&&!t&&arguments[0].is("form")?arguments[0]:null,r=2===e?arguments[1]:t?arguments[0]:{},n=w(a||w("form")).filter("[novalidate]");if(!n.length)return!1;var i=T(r.formOptions||{},o),s=T(r.fieldOptions||{},x);n.each(function(){var r=w(this);r.find(c).not('[type="radio"], [type="checkbox"]').each(function(){var e=w(this);if(s.checkDirtyField&&S(e,s.cssClasses.dirty),e.is("[data-char-count]")){var t=function(e){var t=e.val().length;e.closest("[data-formjs-question]").find("[data-char-length]").text(t)};if(e.is("[maxlength]")){var a=e.attr("maxlength");e.closest("[data-formjs-question]").find("[data-char-maxlength]").text(a)}t(e),e.on("input",function(){t(w(this))})}e.is('[type="file"]')&&0<s.maxFileSize&&r.find("[data-max-file-size]").text(s.maxFileSize),e.val()&&E(e,s)}),r.on(s.validateOnEvents,c,function(e){var t=w(this),a=t.is('select, [type="radio"], [type="checkbox"]'),r=e.type;if(a&&"change"===r||!a&&"input"===r||"change"!==r&&"input"!==r){var n=E(t,s);if("function"==typeof s.onValidation){var i=[{field:t,result:n}];s.onValidation(i)}}}),s.strictHtmlValidation&&r.on("keypress","[maxlength]",function(e){var t=w(this),a=t.val().trim(),r=1*t.attr("maxlength"),n=e.which||e.keyCode;if(a.length>=r&&-1===w.inArray(n,[8,37,38,39,46]))return!1}),s.preventPasteFields&&r.find(s.preventPasteFields).length&&r.on("paste",s.preventPasteFields,function(e){e.preventDefault(),"function"==typeof s.onPastePrevented&&s.onPastePrevented(w(this))}),r.on("submit",function(e){var t=w(this),a={formOptions:i,fieldOptions:s};t.is("[data-ajax-submit]")?(e.preventDefault(),u(t,a)):d(t,a).result||e.preventDefault()})})},isValidField:E,isValidForm:d,submitAjaxForm:u}}(jQuery),SURVEY=function(E,n){var y=function(){var e={};if(E.isArray(n))for(var t=n.length,a=0;a<t;a++){var r=n[a];window[r]&&(e[r]=E.extend(!0,{},window[r]))}return e}(),b=y.WEB_STORAGE.isAvailable,I=E("[data-surveyjs-cont]"),i=I.find("[data-surveyjs-img]"),s=I.find("[data-surveyjs-title]"),o=I.find("[data-surveyjs-desc]"),w=I.find("[data-surveyjs-form]"),l=w.find("[data-surveyjs-body]"),k="form-control",j=function(e){for(var t=e.length,a=""===e[0].id?"":'<option value="">'+A.selectFirstOption+"</option>",r=0;r<t;r++){var n=e[r],i=n.id;a+='<option value="'+i+'" data-answer-id="'+i+'">'+n.answer+"</option>"}return a},x=[],C="SURVEY_"+location.href+"_"+w.attr("name")+"_surveyID[{{surveyID}}]",M=[],d={},u={it:{loadingBox:'<div class="survey-loading" data-surveyjs-loading><i class="glyphicon glyphicon-refresh icon-spin"></i> Caricamento in corso...</div>',selectFirstOption:"Seleziona una risposta...",textareaPlaceholder:"Scrivi la tua risposta...",maxChoiceText:"RISPOSTE MAX",fieldErrorMessage:"&Egrave; necessario rispondere.",fieldErrorMessageMultiChoice:"Puoi scegliere al massimo {{maxChoiceNum}} risposte."},en:{loadingBox:'<div class="survey-loading" data-surveyjs-loading><i class="glyphicon glyphicon-refresh icon-spin"></i> Loading...</div>',selectFirstOption:"Select your answer...",textareaPlaceholder:"Write here your answer...",maxChoiceText:"ANSWERS MAX",fieldErrorMessage:"Answer is necessary.",fieldErrorMessageMultiChoice:"You can choose at maximum {{maxChoiceNum}} answers."}},A={lang:"en",onInitError:null,onInitComplete:null,onInitSuccess:null,onValidation:null,beforeSend:null,onSubmitComplete:null,onSubmitError:null,onSubmitSuccess:null,fieldOptions:{validateOnEvents:"input change"},fieldErrorFeedback:!0,fieldErrorTemplate:'<div class="field-error-message">{{fieldErrorMessage}}</div>',questionTemplate:'<div data-question-id="{{questionId}}" data-question-index="{{questionNumber}}" data-formjs-question="" class="question-box clearfix" {{maxChoice}}><div class="question-header">Question {{questionNumber}}</div><div class="question-body"><div class="question-text">{{questionText}}</div><div class="answers-box form-group clearfix">{{answersHtml}}{{fieldErrorTemplate}}</div></div></div>',labelTagCode:'<label for="{{answerCode}}">{{answerString}}</label>',textareaTemplate:'<div class="row"><div class="col-xs-12 textarea-box"><textarea id="{{answerCode}}" data-answer-id="{{answerId}}" {{nestedAnswer}} name="user-text-answer-{{questionNumber}}" {{attrRequired}} class="{{fieldClass}}" maxlength="250" rows="6" placeholder="{{answerPlaceholder}}"></textarea></div></div>',selectTagCode:'<select id="{{answerCode}}" name="survey-answer-{{questionNumber}}{{addMoreName}}" class="{{fieldClass}}" {{attrRequired}} {{nestedAnswer}} data-answer-root="{{progIdsJoined}}" {{attrRequiredFrom}}>{{optionsHtml}}</select>',selectTemplate:'<div class="single-answer" data-answer-index="{{answerIndex}}">{{selectTagCode}}</div>',graphicInput:!1,inputTagCode:'<input type="{{answerType}}" name="survey-answer-{{questionNumber}}{{addMoreName}}" class="{{fieldClass}}" id="{{answerCode}}" {{nestedAnswer}} data-answer-root="{{progIdsJoined}}" data-answer-id="{{answerId}}" value="{{answerIdValue}}" {{attrRequired}} {{attrRequiredFrom}}/>',inputTemplate:'<div class="single-answer input-container {{answerType}}" data-answer-index="{{answerIndex}}">{{inputLabelTagCode}}</div>',inputGroupTemplate:'<div class="single-answer input-group" data-answer-index="{{answerIndex}}"><span class="input-group-addon {{inputTypeClass}}"><input type="{{answerType}}" name="survey-answer-{{questionNumber}}" id="{{answerCode}}" data-answer-id="{{answerId}}" value="{{answerIdValue}}" {{attrRequired}} data-require-more=""/><label for="{{answerCode}}">&nbsp;{{answerString}}</label></span>{{relatedAnswerField}}</div>'},O=function(e){for(var t=d.survey.questions,a=t.length,r=-1,n=0;n<a;n++){if(t[n].id==e){r=n;break}}return r},S=function(e){var t=O(e);return!!(-1!==t)&&void 0!==d.survey.questions[t].required},c=function(e){var t,a,r=function(e){for(var t="",a=(e=e[0].sort?e.sort(function(e,t){return e.sort>t.sort}):e).length,r=0;r<a;r++){var n=e[r],i=n.maxChoice||"",s="",o=A.questionTemplate;if(s+=F(n,n.id,r),"hidden-privacy"!==n.question){if(o=(o=(o=(o=(o=(o=o.replace(/{{questionId}}/g,n.id)).replace(/{{questionNumber}}/g,r+1)).replace(/{{questionText}}/g,n.question+(""!==i?" ("+i+" "+A.maxChoiceText+")":""))).replace(/{{answersHtml}}/g,s)).replace(/{{maxChoice}}/g,""!==i?'data-max-check="'+i+'"':"")).replace(/{{fieldErrorTemplate}}/g,A.fieldErrorFeedback?A.fieldErrorTemplate:""),A.fieldErrorFeedback&&-1!==A.fieldErrorTemplate.indexOf("{{fieldErrorMessage}}")){var l=i?"<span>"+A.fieldErrorMessage+"</span><span>"+A.fieldErrorMessageMultiChoice+"</span>":A.fieldErrorMessage;o=o.replace(/{{fieldErrorMessage}}/g,l).replace(/{{maxChoiceNum}}/g,i)}t+=o}else I.find('[data-name="bind-survey-answer"]').closest("[data-formjs-question]").attr({"data-question-id":n.id})}return t}(e.questions);C=C.replace(/{{surveyID}}/g,e.id),t=e,a=function(e){return void 0!==e?e:""},w.attr("data-survey-id",t.id),a(t.image)?i.attr("src",t.image):i.remove(),s.text(a(t.title)),o.text(a(t.description)),l.append(r),f(),p(),w.addClass("survey-init-success")},F=function(e,t,a,r){var n=E.isArray(e)?e:e.answers,i=n.length,s=(t=e.id?e.id:t||0,a||0),o="",l="hidden-privacy"===e.question;n[0].sort&&n.sort(function(e,t){return e.sort>t.sort});for(var d=0;d<i;d++){var u="",c=E.isArray(e)?e[d]:e.answers[d],f=d+1,p=s+1,m=c.type,v=c.id,h=0<M.length?M.join("-"):"",g=0<M.length&&0===d?'<div class="field-indent">':"",y=0<M.length&&d===i-1?"</div>":"",b="",w={answerId:v,answerIdValue:"text"===m?"":v,answerIndex:f,answerName:"survey-answer-"+p,answerPlaceholder:"",answerString:"string"==typeof c.answer?c.answer:"",answerType:m,attrRequired:void 0!==e.required?'required=""':void 0!==r?r:"",fieldClass:"checkbox"!==m&&"radio"!==m?k:"",nestedAnswer:""!==h?'data-nested-index="'+f+'"':"",optionsHtml:"",progIdsJoined:h,questionNumber:p,answerCode:("option"===m?"select":m)+"-"+t+"-"+(v||0)+"-"+p+(""!==h?"-"+h:"")+"-"+f};if(l){var x=I.find('[data-name="bind-survey-answer"]').eq(d),C={id:w.answerCode,name:w.answerName,type:m,value:w.answerId};void 0!==e.required&&(C.required=!0),x.prop(C).attr("data-answer-id",w.answerId),x.closest("div").find("label").attr({for:w.answerCode}).find("span").text(c.answer)}else{if("string"==typeof c.answer){if(c.attribute){var O=c.attribute,S=E.isArray(O);u=A.inputGroupTemplate,b=S?A.selectTagCode:A.inputTagCode,S&&(w.optionsHtml=j(O))}else{if(c.nested){o+=g+'<div class="'+m+'"><label for="'+w.answerCode+'" class="field-no-indent">'+c.answer+"</label></div>"+y,M.push(f),o+=F(c.nested,t,s,w.attrRequired);continue}"textarea"===m?(u=A.textareaTemplate,w.answerPlaceholder=c.placeholder||A.textareaPlaceholder):"checkbox"!==m&&"radio"!==m&&"option"!==m?(u=g+A.inputTemplate+y,w.nestedAnswer+=' class="'+k+'"'):"option"===m?(u=g+A.selectTemplate+y,w.optionsHtml=j(e.answers)):u=g+A.inputTemplate+y}0<M.length&&d===i-1&&M.pop()}for(var q in""!==w.optionsHtml&&(u=u.replace(/{{selectTagCode}}/g,A.selectTagCode)),""!==b?(b=(b=(b=(b=(b=(b=(b=b.replace(/{{answerCode}}/g,"")).replace(/{{answerType}}/g,"text")).replace(/{{fieldClass}}/g,k)).replace(/{{answerIdValue}}/g,"")).replace(/{{attrRequired}}/g,"")).replace(/{{addMoreName}}/g,"-more")).replace(/{{attrRequiredFrom}}/g,'data-required-from="#'+w.answerCode+'"'),u=u.replace(/{{relatedAnswerField}}/g,b)):u=(u=u.replace(/{{addMoreName}}/g,"")).replace(/{{attrRequiredFrom}}/g,""),w){var T=new RegExp("{{"+q+"}}","g");u=u.replace(T,w[q])}o+=u,"option"===m&&(d+=e.answers.length)}}return o},q=function(e,t){var a=localStorage.getObject(C);if(a)for(var r=a.length,n=0;n<r;n++){var i=a[n];if(i.field===e){if(void 0!==t&&t&&i.value!==t)continue;return n}}return-1},f=function(){if(b&&localStorage.getObject(C)){var e=localStorage.getObject(C),t=e.length,a=E.extend(!0,{},{focusOnRelated:!1},A.fieldOptions);x=e;for(var r=0;r<t;r++){var n=e[r],i=I.find('[name="'+n.field+'"]'),s=1<i.length?i.first():i,o=s.is('[type="radio"], [type="checkbox"]'),l=o?I.find('[name="'+n.field+'"][value="'+n.value+'"]'):s;o?l.prop("checked",!0):l.val(n.value),y.FORM.isValidField(l,a)}}else b||console.warn("LOCAL STORAGE IS NOT SUPPORTED!")},p=function(){I.on(A.fieldOptions.validateOnEvents,'[data-surveyjs-form] input:not([type="reset"]):not([type="submit"]), [data-surveyjs-form] select, [data-surveyjs-form] textarea, [data-name="bind-survey-answer"]',function(e){var t=e.originalEvent.type,a=E(this),r=a.val().trim(),n=0<a.closest("[data-max-check]").length,i=a.is("[data-require-more]"),s=a.is("[data-required-from]"),o=a.is("[data-required-from]")?E(a.data("required-from")):a,l=o.attr("id")?o.attr("id").split("-")[1]:"id-not-found",d=a.is('select, [type="radio"], [type="checkbox"]');if(-1===O(l))return!0;if(b&&"input"===t&&!a.is("[data-exclude-storage]")){var u=q(a.attr("name"),!!n&&r),c=q(a.attr("name")+"-more");if(i||s||-1===c||x.splice(c,1),-1!==u)n?!1===a.prop("checked")&&x[u].value===r?x.splice(u,1):x.push({field:a.attr("name"),value:r}):""!==r?x[u].value=r:x.splice(u,1);else if(""!==r){if(s&&""!==r){var f=E(a.attr("data-required-from")),p=q(f.attr("name"));-1!==p&&x.splice(p,1),x.push({field:f.attr("name"),value:f.val().trim()})}if(x.push({field:a.attr("name"),value:r}),i){var m=w.find('[data-required-from="#'+a.attr("id")+'"]');x.push({field:m.attr("name"),value:m.val().trim()})}}localStorage.setObject(C,x)}if(S(l)&&(d&&"change"===t||!d&&"input"===t||"change"!==t&&"input"!==t)){var v=A.fieldOptions,h=y.FORM.isValidField(a,v);if("function"==typeof A.onValidation){var g={event:e,fields:[{$field:a,result:h}]};A.onValidation(g)}}}),w.on("submit",function(e){e.preventDefault(),t()})},t=function(){var e=w.find('[type="submit"]');if(e.is(":disabled"))return!1;var d,u,c,t=(d={isValid:!0,callbackData:{event:"submit",fields:[]},answersArray:[]},c=u="",w.find('input:not([type="reset"]):not([type="submit"]), select, textarea').add(I.find('[data-name="bind-survey-answer"]')).each(function(){var e=E(this),t=e.attr("type"),a=e.attr("name");if(a===u&&t===c)return!0;e.is("[data-required-from]")||(u=a,c=t);var r=e.closest("[data-question-id]").data("question-id")||"",n=e.val().trim(),i={question:r,answer:{id_answer:[n]}},s={$field:e,result:!0};if(""!==r&&S(r)){var o=E.extend(!0,{},{focusOnRelated:!1},A.fieldOptions);if(!y.FORM.isValidField(e,o))return s.result=!1,d.callbackData.fields.push(s),!(d.isValid=!1)}if(e.is("[data-required-from]")||""===r||-1===O(r))return!0;if(d.callbackData.fields.push(s),e.is("textarea")&&(i.answer.text=n),"radio"===t){var l=(e.closest("form").length?w:e.closest("[data-formjs-question]")).find('[name="'+a+'"]:checked');l.is("[data-require-more]")&&(i.answer.attributes=E('[data-required-from="#'+l.attr("id")+'"]').val().trim()),l.is("[data-nested-index]")&&(i.answer.attributes=l.attr("data-nested-index")),i.answer.id_answer=[l.val().trim()]}"checkbox"===t&&0<e.closest("[data-max-check]").length&&(i.answer.id_answer=[],w.find('[name="'+a+'"]:checked').each(function(e,t){i.answer.id_answer.push(E(t).val().trim())})),d.answersArray.push(i)}),d),a={id:w.attr("data-survey-id"),answers:t.answersArray},r=w.attr("action");"function"==typeof A.onValidation&&A.onValidation(t.callbackData),t.isValid&&(e.prop("disabled",!0),I.find(".alert").remove(),"function"==typeof A.beforeSend&&(a=A.beforeSend(a,w)||a),E.ajax({cache:!1,url:r,dataType:"json",type:"POST",data:"surveyJSON="+JSON.stringify(a)}).always(function(){e.prop("disabled",!1),"function"==typeof A.onSubmitComplete&&A.onSubmitComplete(w)}).done(function(e){E.isPlainObject(e)&&(b&&localStorage.removeItem(C),"function"==typeof A.onSubmitSuccess&&A.onSubmitSuccess(e,w))}).fail(function(e,t,a){"function"==typeof A.onSubmitError&&A.onSubmitError(e,t,a,w)}))};return{addLanguage:function(e,t){var a=e.toLowerCase();u[a]=t,A.lang=a},setup:function(e){if(void 0!==e&&E.isPlainObject(e))if("string"==typeof e.setJSONurl){if("string"==typeof e.lang){var t=e.lang.toLowerCase();u[t]&&(A.lang=t)}if("boolean"==typeof e.graphicInput&&(A.graphicInput=e.graphicInput),A=E.extend(!0,A,u[A.lang]),-1!==(A=E.extend(!0,A,e)).inputTemplate.indexOf("{{inputLabelTagCode}}")&&(A.inputTemplate=A.inputTemplate.replace(/{{inputLabelTagCode}}/g,!0===A.graphicInput?A.inputTagCode+A.labelTagCode:A.labelTagCode.replace(/{{answerString}}/g,A.inputTagCode+"{{answerString}}"))),-1!==A.inputGroupTemplate.indexOf("{{inputTypeClass}}")){var a=!0===A.graphicInput?"radio":"";A.inputGroupTemplate=A.inputGroupTemplate.replace(/{{inputTypeClass}}/g,a)}r=e.setJSONurl,l.before(A.loadingBox),E.ajax({cache:!1,url:r,method:"POST",dataType:"json"}).always(function(){w.find("[data-surveyjs-loading]").remove(),"function"==typeof A.onInitComplete&&A.onInitComplete(w)}).done(function(e){E.isPlainObject(e)&&("OK"===e.result&&c((d=e).survey),"function"==typeof A.onInitSuccess&&A.onInitSuccess(e,w))}).fail(function(e,t,a){"function"==typeof A.onInitError&&A.onInitError(e,t,a,w)})}else console.error("SURVEY.setup > setJSONurl IS MANDATORY TO INITIALIZE THE SURVEY");var r}}}(jQuery,["WEB_STORAGE","FORM"]);
//# sourceMappingURL=surveyJS.min.js.map