var WEB_STORAGE=function(){var e=function(){var e="check_storage";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}();return e&&(Storage.prototype.setObject=function(e,t){this.setItem(e,JSON.stringify(t))},Storage.prototype.getObject=function(e){var t=this.getItem(e);return t&&JSON.parse(t)}),{isAvailable:e}}(),FORM=function(e){var t={checkDirtyField:!1,cssClasses:{dirty:"dirty-field",error:"has-error",errorMultiChoice:"has-error-switch",valid:"is-valid"},focusOnRelated:!0,maxFileSize:10,onValidation:null,preventPasteFields:'[type="password"], [data-equal-to]',skipUIfeedback:!1,strictHtmlValidation:!1,validateOnEvents:"input change"},a={beforeSend:null,manageFileUpload:!0,onSubmitComplete:null,onSubmitError:null,onSubmitSuccess:null},r={cap:function(e){return/[0-9]{5}$/.test(e)},date:function(e){return/^(0?[1-9]|[12][0-9]|3[01])([ \/\-.])(0?[1-9]|1[012])\2([0-9][0-9][0-9][0-9])(([ -])([0-1]?[0-9]|2[0-3]):[0-5]?[0-9]:[0-5]?[0-9])?$/.test(e)},email:function(e){return/(\w+)\@(\w+)\.[a-zA-Z]/.test(e)},fiscalCode:function(e){return/^(?:[B-DF-HJ-NP-TV-Z](?:[AEIOU]{2}|[AEIOU]X)|[AEIOU]{2}X|[B-DF-HJ-NP-TV-Z]{2}[A-Z]){2}[\dLMNP-V]{2}(?:[A-EHLMPR-T](?:[04LQ][1-9MNP-V]|[1256LMRS][\dLMNP-V])|[DHPS][37PT][0L]|[ACELMRT][37PT][01LM])(?:[A-MZ][1-9MNP-V][\dLMNP-V]{2}|[A-M][0L](?:[\dLMNP-V][1-9MNP-V]|[1-9MNP-V][0L]))[A-Z]$/i.test(e)},hexColor:function(e){return/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/.test(e)},landlineNumber:function(e){return/^((00|\+)\d{2}[\-\. ]??)??(((0[\d]{1,4}))([\/\-\. ]){0,1}([\d, ]{5,10}))$/.test(e)},mobileNumber:function(e){return/^((00|\+)??\d{2}[\-\. ]??)??3\d{2}[\-\. ]??(\d{6,7}|\d{2}[\-\. ]??\d{2}[\-\. ]??\d{3})$/.test(e)},number:function(e){return/[+-]?([0-9]*[.])?[0-9]+/.test(e)},numberFloat:function(e){return/[+-]?([0-9]*[.])[0-9]+/.test(e)},numberInteger:function(e){return/^\d+$/.test(e)},password:function(e){return/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{8,}$/.test(e)},url:function(e){return/^((https?|ftp|file):\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/.test(e)},username:function(e){return/^[a-zA-Z0-9_-]{3,24}$/.test(e)},vatNumber:function(e){return/^(IT){0,1}[0-9]{11}$/i.test(e)}},n='input:not([type="reset"]):not([type="submit"]):not([type=button]):not([type=hidden]), select, textarea',i={exactLength:function(e,t){return e.length===1*t},max:function(e,t){return(e=1*e)<=1*t},maxlength:function(e,t){return e.length<=1*t},min:function(e,t){return(e=1*e)>=1*t}},s=function(t,a){var r=t.closest("form").length>0?t.closest("form"):t.closest("[data-formjs-question]"),n='[name="'+t.attr("name")+'"]';if(t.is('[type="radio"]')){var i=r.find(n+":checked"),s=r.find(n+"[data-require-more]"),o=!0;return s.length>0&&s.each(function(t,n){var i=e(n),s=r.find('[data-required-from="#'+i.attr("id")+'"]');s.prop("required",!1),i.is(":checked")?(s.prop("required",!0),a.focusOnRelated?s.focus():i.is("[required]")&&0===s.val().trim().length&&(o=!1)):s.val("")}),!t.is("[required]")||i.length>0&&i.val().trim().length>0&&o}if(t.is('[type="checkbox"]')){if(t.closest("[data-max-check]").length>0){var l=t.closest("[data-max-check]").data("max-check"),d=r.find('[name="'+t.attr("name")+'"]:checked').length;return{isChecked:d>0&&d<=l,exceedMaxCheck:d>l}}return t.prop("checked")}},o=function(e){e=e||{};for(var t=1;t<arguments.length;t++){var a=arguments[t];if(a)for(var r in a)e.hasOwnProperty(r)&&"[object Array]"!==Object.prototype.toString.call(a[r])?"[object Object]"===Object.prototype.toString.call(a[r])&&(e[r]=o(e[r],a[r])):e[r]=a[r]}return e},l=function(a,r){r=r||t.cssClasses.dirty;a.each(function(){var t=e(this);t.is('[type="checkbox"], [type="radio"]')||(t.val()?t.addClass(r):t.removeClass(r))})},d=function(t){var a={};return t.find("input, select, textarea").not('[type="reset"], [type="submit"], [type="button"], [type="file"], [data-exclude-json]').each(function(){var t=e(this),r=t.is('[type="checkbox"]'),n=t.is('[type="radio"]'),i=t.attr("name"),s=r?[]:t.val();if(r||n){var o=t.closest("form").find('[name="'+i+'"]:checked');n?s=0===o.length?null:o.val():o.each(function(){s.push(e(this).val())})}a[i]=s}),a},u=function(a,n){if(!a.length)return!1;var d=o(n||{},t),c=a.attr("type"),f=a.val().trim(),p=f.length>0,m=!1,v=a.closest("[data-max-check]").length>0,h=a.is("[required]"),g=a.is("[data-required-from]"),y=a.is("[data-validate-if-filled]"),b=p,x=a.closest("[data-formjs-question]"),w=a.closest("form").find('[data-equal-to="'+a.attr("name")+'"]');if(d.checkDirtyField&&l(a,d.cssClasses.dirty),!h&&!y&&!g&&"checkbox"!==c&&"radio"!==c||y&&!p)b=!0;else{if("checkbox"===c){var C=s(a,d);b=v?C.isChecked:C,m=!!v&&C.exceedMaxCheck}else if("file"===c&&d.maxFileSize>0)e.each(a[0].files,function(e,t){t.size/1024/1024>d.maxFileSize&&(b=!1)});else if("radio"===c)b=s(a,d);else{var O={},S=!0;if(a.is("[data-equal-to]")){var q=e('[name="'+a.data("equal-to")+'"]');b=f===q.val().trim(),S=!1}else{if(g){var T=e(a.data("required-from"));b=e('[name="'+T.attr("name")+'"]:checked').length>0,p&&(T.prop("checked",!0),a.prop("required",!0)),T.is(":checked")||(S=!1)}a.is("[data-exact-length]")&&(O.exactLength=a.data("exact-length")),a.is("[max]")&&(O.max=a.attr("max")),a.is("[maxlength]")&&(O.maxlength=a.attr("maxlength")),a.is("[min]")&&(O.min=a.attr("min"))}b=S?function(e,t){var a=e.is("[data-subtype]")?e.data("subtype").replace(/-([a-z])/gi,function(e,t){return t.toUpperCase()}):e.attr("type"),n=!0,s=e.val().trim();for(var o in t)i[o](s,t[o])||(n=!1);return("function"==typeof r[a]?r[a](s):s.length>0)&&n}(a,O):b}w.length>0&&u(w,d)}return x.length>0&&(d.skipUIfeedback?x.removeClass(d.cssClasses.valid+" "+d.cssClasses.error+" "+d.cssClasses.errorMultiChoice):b?(x.removeClass(d.cssClasses.error).addClass(d.cssClasses.valid),v&&!m&&x.removeClass(d.cssClasses.errorMultiChoice)):(x.addClass(d.cssClasses.error).removeClass(d.cssClasses.valid),v&&m&&x.addClass(d.cssClasses.errorMultiChoice))),b},c=function(r,i){if(!r.length||!r.is("[novalidate]"))return!1;o((i=i||{}).formOptions||{},a);var s=o(i.fieldOptions||{},t),l={$fields:[],result:!0},d="",c="";return void 0===s.focusOnRelated&&(s.focusOnRelated=!1),r.find(n).each(function(t,a){var r=e(a),n=r.attr("name"),i=r.attr("type"),o={$field:r,result:!0};if(n===d&&i===c)return!0;r.is("[data-required-from]")||(d=n,c=i);var f=u(r,s);o.result=f,f||(l.result=!1),l.$fields.push(o)}),l},f=function(r,n){(n=void 0===n?{}:n).fieldOptions=o(n.fieldOptions||{},t),n.formOptions=o(n.formOptions||{},a);var i=c(r,n),s=r.find('[type="submit"]');if("function"==typeof n.fieldOptions.onValidation&&n.fieldOptions.onValidation(i.$fields),!i.result||s.is(":disabled"))return!1;s.prop("disabled",!0);var l=d(r);if("function"==typeof n.formOptions.beforeSend){var u={formData:l,stopExecution:!1},f=n.formOptions.beforeSend(u,r);if("[object Object]"===Object.prototype.toString.call(f)&&(l=f.formData||l,f.stopExecution))return!1}var p={cache:!1,url:r.attr("action"),data:l,method:r.attr("method")||"POST"};if(r.is('[enctype="multipart/form-data"]')&&n.formOptions.manageFileUpload){var m=new FormData;for(var v in p.data)m.append(v,p.data[v]);r.find('[type="file"]').each(function(t,a){a=a;e.each(a.files,function(e,t){var r=a.name+"["+e+"]";m.append(r,t,t.name)})}),p.contentType=!1,p.processData=!1,p.data=m}if(r.is("[data-ajax-settings]")){var h=r.data("ajax-settings");try{p=o(p,h)}catch(e){return console.error("data-ajax-settings specified for "+r.attr("name")+" form is not a valid JSON object!"),!1}}e.ajax(p).always(function(e,t,a){if(s.prop("disabled",!1),"function"==typeof n.formOptions.onSubmitComplete){var i={dataOrXHR:e,status:t,XHRorResponse:a};n.formOptions.onSubmitComplete(i,r)}}).done(function(e,t,a){if("function"==typeof n.formOptions.onSubmitSuccess){var i={data:e,status:t,response:a};n.formOptions.onSubmitSuccess(i,r)}}).fail(function(e,t,a){if("function"==typeof n.formOptions.onSubmitError){var i={errorThrown:a,status:t,response:e};n.formOptions.onSubmitError(i,r)}})};return{addValidationRules:function(e){r=o(e,r)},checkDirtyField:l,getFormJSON:d,init:function(r,i){var s=e(r||e("form")).filter("[novalidate]");i=i||{};if(!s.length)return!1;var d=o(i.formOptions||{},a),c=o(i.fieldOptions||{},t);s.each(function(){var t=e(this);t.find(n).not('[type="radio"], [type="checkbox"]').each(function(){var a=e(this);if(c.checkDirtyField&&l(a,c.cssClasses.dirty),a.is("[data-char-count]")){var r=function(e){var t=e.val().length;e.closest("[data-formjs-question]").find("[data-char-length]").text(t)};if(a.is("[maxlength]")){var n=a.attr("maxlength");a.closest("[data-formjs-question]").find("[data-char-maxlength]").text(n)}r(a),a.on("input",function(){r(e(this))})}a.is('[type="file"]')&&c.maxFileSize>0&&t.find("[data-max-file-size]").text(c.maxFileSize),a.val()&&u(a,c)}),t.on(c.validateOnEvents,n,function(t){var a=e(this),r=a.is('select, [type="radio"], [type="checkbox"]'),n=t.type;if(r&&"change"===n||!r&&"input"===n||"change"!==n&&"input"!==n){var i=u(a,c);if("function"==typeof c.onValidation){var s=[{$field:a,result:i}];c.onValidation(s)}}}),c.strictHtmlValidation&&t.on("keypress","[maxlength]",function(t){var a=e(this),r=a.val().trim(),n=1*a.attr("maxlength"),i=t.which||t.keyCode;if(r.length>=n&&-1===e.inArray(i,[8,37,38,39,46]))return!1}),c.preventPasteFields&&t.find(c.preventPasteFields).length&&t.on("paste",c.preventPasteFields,function(e){e.preventDefault()}),t.filter("[data-ajax-submit]").on("submit",function(t){t.preventDefault();var a={formOptions:d,fieldOptions:c};f(e(this),a)})})},isValidField:u,isValidForm:c,submitAjaxForm:f}}(jQuery),SURVEY=function(e,t){var a=function(){var a={};if(e.isArray(t))for(var r=t.length,n=0;n<r;n++){var i=t[n];window[i]&&(a[i]=e.extend(!0,{},window[i]))}return a}(),r=a.WEB_STORAGE.isAvailable,n=e("[data-surveyjs-cont]"),i=n.find("[data-surveyjs-img]"),s=n.find("[data-surveyjs-title]"),o=n.find("[data-surveyjs-desc]"),l=n.find("[data-surveyjs-form]"),d=l.find("[data-surveyjs-body]"),u="form-control",c=function(e){for(var t=e.length,a=""===e[0].id?"":'<option value="">'+g.selectFirstOption+"</option>",r=0;r<t;r++){var n=e[r],i=n.id;a+='<option value="'+i+'" data-answer-id="'+i+'">'+n.answer+"</option>"}return a},f=[],p="SURVEY_"+location.href+"_"+l.attr("name")+"_surveyID[{{surveyID}}]",m=[],v={},h={it:{loadingBox:'<div class="survey-loading" data-surveyjs-loading><i class="glyphicon glyphicon-refresh icon-spin"></i> Caricamento in corso...</div>',selectFirstOption:"Seleziona una risposta...",textareaPlaceholder:"Scrivi la tua risposta...",maxChoiceText:"RISPOSTE MAX",fieldErrorMessage:"&Egrave; necessario rispondere.",fieldErrorMessageMultiChoice:"Puoi scegliere al massimo {{maxChoiceNum}} risposte."},en:{loadingBox:'<div class="survey-loading" data-surveyjs-loading><i class="glyphicon glyphicon-refresh icon-spin"></i> Loading...</div>',selectFirstOption:"Select your answer...",textareaPlaceholder:"Write here your answer...",maxChoiceText:"ANSWERS MAX",fieldErrorMessage:"Answer is necessary.",fieldErrorMessageMultiChoice:"You can choose at maximum {{maxChoiceNum}} answers."}},g={lang:"en",onInitError:null,onInitComplete:null,onInitSuccess:null,onValidation:null,beforeSend:null,onSubmitComplete:null,onSubmitError:null,onSubmitSuccess:null,fieldOptions:{validateOnEvents:"input change"},fieldErrorFeedback:!0,fieldErrorTemplate:'<div class="field-error-message">{{fieldErrorMessage}}</div>',questionTemplate:'<div data-question-id="{{questionId}}" data-question-index="{{questionNumber}}" data-formjs-question="" class="question-box clearfix" {{maxChoice}}><div class="question-header">Question {{questionNumber}}</div><div class="question-body"><div class="question-text">{{questionText}}</div><div class="answers-box form-group clearfix">{{answersHtml}}{{fieldErrorTemplate}}</div></div></div>',labelTagCode:'<label for="{{answerCode}}">{{answerString}}</label>',textareaTemplate:'<div class="row"><div class="col-xs-12 textarea-box"><textarea id="{{answerCode}}" data-answer-id="{{answerId}}" {{nestedAnswer}} name="user-text-answer-{{questionNumber}}" {{attrRequired}} class="{{fieldClass}}" maxlength="250" rows="6" placeholder="{{answerPlaceholder}}"></textarea></div></div>',selectTagCode:'<select id="{{answerCode}}" name="survey-answer-{{questionNumber}}{{addMoreName}}" class="{{fieldClass}}" {{attrRequired}} {{nestedAnswer}} data-answer-root="{{progIdsJoined}}" {{attrRequiredFrom}}>{{optionsHtml}}</select>',selectTemplate:'<div class="single-answer" data-answer-index="{{answerIndex}}">{{selectTagCode}}</div>',graphicInput:!1,inputTagCode:'<input type="{{answerType}}" name="survey-answer-{{questionNumber}}{{addMoreName}}" class="{{fieldClass}}" id="{{answerCode}}" {{nestedAnswer}} data-answer-root="{{progIdsJoined}}" data-answer-id="{{answerId}}" value="{{answerIdValue}}" {{attrRequired}} {{attrRequiredFrom}}/>',inputTemplate:'<div class="single-answer input-container {{answerType}}" data-answer-index="{{answerIndex}}">{{inputLabelTagCode}}</div>',inputGroupTemplate:'<div class="single-answer input-group" data-answer-index="{{answerIndex}}"><span class="input-group-addon {{inputTypeClass}}"><input type="{{answerType}}" name="survey-answer-{{questionNumber}}" id="{{answerCode}}" data-answer-id="{{answerId}}" value="{{answerIdValue}}" {{attrRequired}} data-require-more=""/><label for="{{answerCode}}">&nbsp;{{answerString}}</label></span>{{relatedAnswerField}}</div>'},y=function(e){for(var t=v.survey.questions,a=t.length,r=-1,n=0;n<a;n++){if(t[n].id==e){r=n;break}}return r},b=function(e){var t=y(e);return!!(-1!==t)&&void 0!==v.survey.questions[t].required},x=function(e){var t=function(e){for(var t="",a=(e=e[0].sort?e.sort(function(e,t){return e.sort>t.sort}):e).length,r=0;r<a;r++){var i=e[r],s=i.maxChoice||"",o="",l=g.questionTemplate;if(o+=w(i,i.id,r),"hidden-privacy"!==i.question){if(l=l.replace(/{{questionId}}/g,i.id),l=l.replace(/{{questionNumber}}/g,r+1),l=l.replace(/{{questionText}}/g,i.question+(""!==s?" ("+s+" "+g.maxChoiceText+")":"")),l=l.replace(/{{answersHtml}}/g,o),l=l.replace(/{{maxChoice}}/g,""!==s?'data-max-check="'+s+'"':""),l=l.replace(/{{fieldErrorTemplate}}/g,g.fieldErrorFeedback?g.fieldErrorTemplate:""),g.fieldErrorFeedback&&-1!==g.fieldErrorTemplate.indexOf("{{fieldErrorMessage}}")){var d=s?"<span>"+g.fieldErrorMessage+"</span><span>"+g.fieldErrorMessageMultiChoice+"</span>":g.fieldErrorMessage;l=l.replace(/{{fieldErrorMessage}}/g,d).replace(/{{maxChoiceNum}}/g,s)}t+=l}else n.find('[data-name="bind-survey-answer"]').closest("[data-formjs-question]").attr({"data-question-id":i.id})}return t}(e.questions);p=p.replace(/{{surveyID}}/g,e.id),function(e){var t=function(e){return void 0!==e?e:""};l.attr("data-survey-id",e.id),t(e.image)?i.attr("src",e.image):i.remove(),s.text(t(e.title)),o.text(t(e.description))}(e),d.append(t),O(),S(),l.addClass("survey-init-success")},w=function(t,a,r,i){var s=e.isArray(t)?t:t.answers,o=s.length,l=(a=t.id?t.id:a||0,r||0),d="",f="hidden-privacy"===t.question;s[0].sort&&s.sort(function(e,t){return e.sort>t.sort});for(var p=0;p<o;p++){var v="",h=e.isArray(t)?t[p]:t.answers[p],y=p+1,b=l+1,x=h.type,C=h.id,O=m.length>0?m.join("-"):"",S=m.length>0&&0===p?'<div class="field-indent">':"",q=m.length>0&&p===o-1?"</div>":"",T="",E={answerId:C,answerIdValue:"text"===x?"":C,answerIndex:y,answerName:"survey-answer-"+b,answerPlaceholder:"",answerString:"string"==typeof h.answer?h.answer:"",answerType:x,attrRequired:void 0!==t.required?'required=""':void 0!==i?i:"",fieldClass:"checkbox"!==x&&"radio"!==x?u:"",nestedAnswer:""!==O?'data-nested-index="'+y+'"':"",optionsHtml:"",progIdsJoined:O,questionNumber:b,answerCode:("option"===x?"select":x)+"-"+a+"-"+(C||0)+"-"+b+(""!==O?"-"+O:"")+"-"+y};if(f){var I=n.find('[data-name="bind-survey-answer"]').eq(p),k={id:E.answerCode,name:E.answerName,type:x,value:E.answerId};void 0!==t.required&&(k.required=!0),I.prop(k).attr("data-answer-id",E.answerId),I.closest("div").find("label").attr({for:E.answerCode}).find("span").text(h.answer)}else{if("string"==typeof h.answer){if(h.attribute){var j=h.attribute,A=e.isArray(j);v=g.inputGroupTemplate,T=A?g.selectTagCode:g.inputTagCode,A&&(E.optionsHtml=c(j))}else{if(h.nested){d+=S+'<div class="'+x+'"><label for="'+E.answerCode+'" class="field-no-indent">'+h.answer+"</label></div>"+q,m.push(y),d+=w(h.nested,a,l,E.attrRequired);continue}"textarea"===x?(v=g.textareaTemplate,E.answerPlaceholder=h.placeholder||g.textareaPlaceholder):"checkbox"!==x&&"radio"!==x&&"option"!==x?(v=S+g.inputTemplate+q,E.nestedAnswer+=' class="'+u+'"'):"option"===x?(v=S+g.selectTemplate+q,E.optionsHtml=c(t.answers)):v=S+g.inputTemplate+q}m.length>0&&p===o-1&&m.pop()}""!==E.optionsHtml&&(v=v.replace(/{{selectTagCode}}/g,g.selectTagCode)),""!==T?(T=(T=(T=(T=(T=(T=(T=T.replace(/{{answerCode}}/g,"")).replace(/{{answerType}}/g,"text")).replace(/{{fieldClass}}/g,u)).replace(/{{answerIdValue}}/g,"")).replace(/{{attrRequired}}/g,"")).replace(/{{addMoreName}}/g,"-more")).replace(/{{attrRequiredFrom}}/g,'data-required-from="#'+E.answerCode+'"'),v=v.replace(/{{relatedAnswerField}}/g,T)):v=(v=v.replace(/{{addMoreName}}/g,"")).replace(/{{attrRequiredFrom}}/g,"");for(var F in E){var M=new RegExp("{{"+F+"}}","g");v=v.replace(M,E[F])}d+=v,"option"===x&&(p+=t.answers.length)}}return d},C=function(e,t){var a=localStorage.getObject(p);if(a)for(var r=a.length,n=0;n<r;n++){var i=a[n];if(i.field===e){if(void 0!==t&&t&&i.value!==t)continue;return n}}return-1},O=function(){if(r&&localStorage.getObject(p)){var t=localStorage.getObject(p),i=t.length,s=e.extend(!0,{},{focusOnRelated:!1},g.fieldOptions);f=t;for(var o=0;o<i;o++){var l=t[o],d=n.find('[name="'+l.field+'"]'),u=d.length>1?d.first():d,c=u.is('[type="radio"], [type="checkbox"]'),m=c?n.find('[name="'+l.field+'"][value="'+l.value+'"]'):u;c?m.prop("checked",!0):m.val(l.value),a.FORM.isValidField(m,s)}}else r||console.warn("LOCAL STORAGE IS NOT SUPPORTED!")},S=function(){n.on(g.fieldOptions.validateOnEvents,'[data-surveyjs-form] input:not([type="reset"]):not([type="submit"]), [data-surveyjs-form] select, [data-surveyjs-form] textarea, [data-name="bind-survey-answer"]',function(t){var n=t.originalEvent.type,i=e(this),s=i.val().trim(),o=i.closest("[data-max-check]").length>0,d=i.is("[data-require-more]"),u=i.is("[data-required-from]"),c=i.is("[data-required-from]")?e(i.data("required-from")):i,m=c.attr("id")?c.attr("id").split("-")[1]:"id-not-found",v=i.is('select, [type="radio"], [type="checkbox"]');if(-1===y(m))return!0;if(r&&"input"===n&&!i.is("[data-exclude-storage]")){var h=C(i.attr("name"),!!o&&s),x=C(i.attr("name")+"-more");if(d||u||-1===x||f.splice(x,1),-1!==h)o?!1===i.prop("checked")&&f[h].value===s?f.splice(h,1):f.push({field:i.attr("name"),value:s}):""!==s?f[h].value=s:f.splice(h,1);else if(""!==s){if(u&&""!==s){var w=e(i.attr("data-required-from")),O=C(w.attr("name"));-1!==O&&f.splice(O,1),f.push({field:w.attr("name"),value:w.val().trim()})}if(f.push({field:i.attr("name"),value:s}),d){var S=l.find('[data-required-from="#'+i.attr("id")+'"]');f.push({field:S.attr("name"),value:S.val().trim()})}}localStorage.setObject(p,f)}if(b(m)&&(v&&"change"===n||!v&&"input"===n||"change"!==n&&"input"!==n)){var q=g.fieldOptions,T=a.FORM.isValidField(i,q);if("function"==typeof g.onValidation){var E={event:t,fields:[{$field:i,result:T}]};g.onValidation(E)}}}),l.on("submit",function(e){e.preventDefault(),q()})},q=function(){var t=l.find('[type="submit"]');if(t.is(":disabled"))return!1;var i=function(){var t={isValid:!0,callbackData:{event:"submit",fields:[]},answersArray:[]},r="",i="";return l.find('input:not([type="reset"]):not([type="submit"]), select, textarea').add(n.find('[data-name="bind-survey-answer"]')).each(function(){var n=e(this),s=n.attr("type"),o=n.attr("name");if(o===r&&s===i)return!0;n.is("[data-required-from]")||(r=o,i=s);var d=n.closest("[data-question-id]").data("question-id")||"",u=n.val().trim(),c={question:d,answer:{id_answer:[u]}},f={$field:n,result:!0};if(""!==d&&b(d)){var p=e.extend(!0,{},{focusOnRelated:!1},g.fieldOptions);if(!a.FORM.isValidField(n,p))return f.result=!1,t.callbackData.fields.push(f),t.isValid=!1,!0}if(n.is("[data-required-from]")||""===d||-1===y(d))return!0;if(t.callbackData.fields.push(f),n.is("textarea")&&(c.answer.text=u),"radio"===s){var m=(n.closest("form").length?l:n.closest("[data-formjs-question]")).find('[name="'+o+'"]:checked');m.is("[data-require-more]")&&(c.answer.attributes=e('[data-required-from="#'+m.attr("id")+'"]').val().trim()),m.is("[data-nested-index]")&&(c.answer.attributes=m.attr("data-nested-index")),c.answer.id_answer=[m.val().trim()]}"checkbox"===s&&n.closest("[data-max-check]").length>0&&(c.answer.id_answer=[],l.find('[name="'+o+'"]:checked').each(function(t,a){c.answer.id_answer.push(e(a).val().trim())})),t.answersArray.push(c)}),t}(),s={id:l.attr("data-survey-id"),answers:i.answersArray},o=l.attr("action");"function"==typeof g.onValidation&&g.onValidation(i.callbackData),i.isValid&&(t.prop("disabled",!0),n.find(".alert").remove(),"function"==typeof g.beforeSend&&(s=g.beforeSend(s,l)||s),e.ajax({cache:!1,url:o,dataType:"json",type:"POST",data:"surveyJSON="+JSON.stringify(s)}).always(function(){t.prop("disabled",!1),"function"==typeof g.onSubmitComplete&&g.onSubmitComplete(l)}).done(function(t){e.isPlainObject(t)&&(r&&localStorage.removeItem(p),"function"==typeof g.onSubmitSuccess&&g.onSubmitSuccess(t,l))}).fail(function(e,t,a){"function"==typeof g.onSubmitError&&g.onSubmitError(e,t,a,l)}))};return{addLanguage:function(e,t){var a=e.toLowerCase();h[a]=t,g.lang=a},setup:function(t){if(void 0!==t&&e.isPlainObject(t))if("string"==typeof t.setJSONurl){if("string"==typeof t.lang){var a=t.lang.toLowerCase();h[a]&&(g.lang=a)}if("boolean"==typeof t.graphicInput&&(g.graphicInput=t.graphicInput),g=e.extend(!0,g,h[g.lang]),-1!==(g=e.extend(!0,g,t)).inputTemplate.indexOf("{{inputLabelTagCode}}")&&(g.inputTemplate=g.inputTemplate.replace(/{{inputLabelTagCode}}/g,!0===g.graphicInput?g.inputTagCode+g.labelTagCode:g.labelTagCode.replace(/{{answerString}}/g,g.inputTagCode+"{{answerString}}"))),-1!==g.inputGroupTemplate.indexOf("{{inputTypeClass}}")){var r=!0===g.graphicInput?"radio":"";g.inputGroupTemplate=g.inputGroupTemplate.replace(/{{inputTypeClass}}/g,r)}!function(t){d.before(g.loadingBox),e.ajax({cache:!1,url:t,method:"POST",dataType:"json"}).always(function(){l.find("[data-surveyjs-loading]").remove(),"function"==typeof g.onInitComplete&&g.onInitComplete(l)}).done(function(t){e.isPlainObject(t)&&("OK"===t.result&&(v=t,x(t.survey)),"function"==typeof g.onInitSuccess&&g.onInitSuccess(t,l))}).fail(function(e,t,a){"function"==typeof g.onInitError&&g.onInitError(e,t,a,l)})}(t.setJSONurl)}else console.error("SURVEY.setup > setJSONurl IS MANDATORY TO INITIALIZE THE SURVEY")}}}(jQuery,["WEB_STORAGE","FORM"]);
//# sourceMappingURL=surveyJS.min.js.map