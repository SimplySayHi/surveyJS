/* surveyJS Lite v4.0.2 | Valerio Di Punzio (@SimplySayHi) | https://www.valeriodipunzio.com/plugins/surveyJS/ | https://github.com/SimplySayHi/surveyJS | MIT license */
!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e="undefined"!=typeof globalThis?globalThis:e||self).Survey=r()}(this,(function(){"use strict";function e(r){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(r)}function r(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function t(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var s=function(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.href,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.headers=new Headers(t.headers),t.timeout>0){var s=new AbortController,a=s.signal;t.signal=a,e=window.setTimeout((function(){s.abort()}),t.timeout)}return fetch(r,t).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).catch((function(e){throw new Error(e.message)})).finally((function(){e&&window.clearTimeout(e)}))},a=function(e){return Element.prototype.isPrototypeOf(e)},o=function(r){var t=e(r),s="string"===t&&a(document.querySelector(r))&&"form"===document.querySelector(r).tagName.toLowerCase();return{result:a(r)||s,element:"string"===t?document.querySelector(r):r}},n="sjs:destroy",i="sjs:init",l=function r(t){return Object.getOwnPropertyNames(t).forEach((function(s){var a=t[s];"object"===e(a)&&null!==a&&r(a)})),Object.freeze(t)},c=function(e){return"[object Object]"===Object.prototype.toString.call(e)},u=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Array.from(arguments).slice(1).filter((function(e){return!!e})).forEach((function(t){Object.keys(t).forEach((function(s){Array.isArray(t[s])?r[s]=(r[s]||[]).concat(t[s].slice(0)):c(t[s])?r[s]=e(r[s]||{},t[s]):Array.isArray(r[s])?r[s].push(t[s]):r[s]=t[s]}))})),r},d=function(e,r,t){t=u({},{bubbles:!0},t);var s=new CustomEvent(r,t);e.dispatchEvent(s)},p=function(e){return NodeList.prototype.isPrototypeOf(e)},f=function(e,r){return Object.keys(e).reduce((function(r,t){var s=new RegExp("{{"+t+"}}","g");return r.replace(s,e[t])}),r)},y=function(e){return e[0].sort&&e.sort((function(e,r){return e.sort>r.sort})),e},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return y(e).reduce((function(e,r){return e+'<option value="'.concat(r.value,'">').concat(r.label,"</option>")}),"")},m=function(e,r,t){var s=["data","id","label","nested","related","sort"];/^(option|textarea)$/.test(e.type)&&s.push("type","value");var a="";return Object.keys(e).filter((function(e){return-1===s.indexOf(e)})).forEach((function(r){a+=" ".concat(r,'="').concat(e[r],'"')})),e.data&&Object.keys(e.data).forEach((function(r){a+=" data-".concat(function(){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().replace(/(([_ ])([a-z]))|(([a-z])?([A-Z]))/g,(function(e,r,t,s,a,o,n){return(s?"-"+s:(o||"")+"-"+n).toLowerCase()}));return e?r.toUpperCase():r}(r),'="').concat(e.data[r],'"')})),t&&(a+=" required"),e.related&&(a+=" data-require-more"),(a+=' id="'.concat(r,'"')).trim()},b=function e(r,t,s){var a="",o="";return y(r).forEach((function(n,i){var l,c="option"===n.type?"select":n.type;if("select"!==c||o!==c){o=c,t.question.checks&&(n=u({},n,{data:{checks:t.question.checks}}));var d="".concat(c,"-").concat(t.surveyId,"-").concat(t.question.id,"-").concat("select"===c?i+1:n.id),p={questionNumber:t.question.index+1,wrapperClasses:s.cssClasses.wrapper[c]||s.cssClasses.wrapper.field,fieldAttributes:m(n,d,t.question.isRequired),fieldClasses:s.cssClasses[c]||s.cssClasses.field,answerType:c,answerCode:d,addMoreName:"",labelString:n.label||"",labelClasses:s.cssClasses.label},y="";if(n.related){var b=n.related.type||"select",h="select"===b,w=h?u({},n):n.related;w.type=h?"option":b,w.id="",w.data=u({},w.data,{requiredFrom:"#"+d}),delete w.related;var g={fieldAttributes:m(w,"",!1),answerType:b,addMoreName:"-more",fieldClasses:h?s.cssClasses.select:s.cssClasses[b]||s.cssClasses.field};if(y=s.templates[b]||s.templates.input,h){var j=v(n.related);y=y.replace("{{optionsHtml}}",j)}y=f(g,y)}var q=function(e,r){return{field:r[e]||r.input,label:/^(checkbox|nested|radio|related)$/.test(e)?r.label:"",wrapper:r.wrapper[e]||r.wrapper.field}}(n.related?"related":n.nested?"nested":c,s.templates),C="";n.nested&&(C=e(n.nested,t,s));var T="";"select"===c&&(T=v(r)),l=q.wrapper.replace("{{relatedFieldHTML}}",y).replace("{{fieldTemplate}}",q.field).replace("{{optionsHtml}}",T).replace("{{labelTemplate}}",q.label).replace("{{nestedFieldsHTML}}",C),a+=f(p,l)}})),a},h=function(e,r,t){return y(e).reduce((function(e,s,a){if(s.external)return e;var o=t.templates.wrapper.question,n=s.id,i=a+1,l={surveyId:r,question:{id:n,index:a,isRequired:!!s.required}};s.checks&&(l.question.checks=s.checks);var u=b(s.answers,l,t),d=s.checks?JSON.parse(s.checks):"",p=d[0]||"",y=d[1]||"",v=d&&t.messages.maxChoice?" ("+y+" "+t.messages.maxChoice+")":"",m={questionId:n,questionNumber:i,questionText:s.question+v,answersHTML:u};if(o=f(m,o),t.showErrorMessage){var h=""!==d?t.messages.errorMultiChoice:s.errorMessage||t.messages.error;c(h)&&(h=""),o=o.replace(/{{errorTemplates}}/g,h)}return e+f({checksMin:p,checksMax:y},o)}),"")},w=function(e,r,t){var s=h(e.questions,e.id,t);r.querySelector("[data-surveyjs-body]").insertAdjacentHTML("beforeend",s);var a=e.questions.filter((function(e){return e.external}));if(a.length>0){var o=r.closest("[data-surveyjs-wrapper]");a.forEach((function(r,t){var s=o.querySelector('[data-surveyjs-external="'+(t+1)+'"]');s.setAttribute("data-question-id",r.id),r.answers.forEach((function(t,a){var o=s.querySelectorAll("[data-field]")[a],n={id:"".concat(t.type,"-").concat(e.id,"-").concat(r.id,"-").concat(t.id),type:t.type,value:t.value,required:!!r.required};Object.keys(n).forEach((function(e){o[e]=n[e]}));var i=o.closest("[data-answer]");i.querySelector("label").setAttribute("for",n.id),i.querySelector("[data-label]").innerHTML=t.label,s.querySelector("[data-question]").innerHTML=r.question}))}))}},g=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e);var n=arguments.length,c=o(t);if(0===n||n>0&&!t)throw new Error('First argument "$form" is missing or falsy!');if(p(t))throw new Error('First argument "$form" must be a single DOM node or a form CSS selector, not a NodeList!');if(!c.result)throw new Error('First argument "$form" is not a DOM node nor a form CSS selector!');if(!a.url||"string"!=typeof a.url)throw new Error('"options.url" is missing or not a string!');var f=this;f.$form=c.element,f.options=u({},e.prototype.options,a),t=f.$form,a=f.options,t.surveyjs=f,t.querySelector("[data-surveyjs-body]").insertAdjacentHTML("beforebegin",a.templates.loading);var y=s(a.url,a.initAjaxOptions).then((function(e){return"success"!==e.status.toLowerCase()?Promise.reject(e):(e.data.questions&&e.data.questions.length>0&&(w(e.data,t,a),Object.defineProperty(f,"data",{value:l(e.data)}),f.isInitialized=!0,t.closest("[data-surveyjs-wrapper]").classList.add("surveyjs-init-success")),e)})).finally((function(){var e=t.querySelector("[data-surveyjs-loading]");e&&e.parentNode.removeChild(e)}));d(t,i,{detail:y})}var a,c,f;return a=e,f=[{key:"setOptions",value:function(r){e.prototype.options=u({},e.prototype.options,r)}}],(c=[{key:"destroy",value:function(){delete this.$form.surveyjs,d(this.$form,n)}}])&&t(a.prototype,c),f&&t(a,f),Object.defineProperty(a,"prototype",{writable:!1}),e}();return g.prototype.isInitialized=!1,g.prototype.options={cssClasses:{checkbox:"form-check-input",field:"form-control",file:"form-control-file",label:"form-check-label",radio:"form-check-input",wrapper:{checkbox:"form-check",field:"",radio:"form-check"}},initAjaxOptions:{cache:"no-store",credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"},method:"GET",mode:"same-origin",redirect:"follow",timeout:0},messages:{maxChoice:"answers max",error:"Answer is necessary.",errorMultiChoice:"You must choose from {{checksMin}} to {{checksMax}} answers."},showErrorMessage:!0,templates:{error:'<div class="surveyjs-error-message">{{errorMessage}}</div>',input:'<input {{fieldAttributes}} name="surveyjs-answer-{{questionNumber}}{{addMoreName}}" class="surveyjs-input surveyjs-{{answerType}} {{fieldClasses}}" />',label:'<label for="{{answerCode}}" class="surveyjs-label {{labelClasses}}">{{labelString}}</label>',loading:'<div class="surveyjs-loading" data-surveyjs-loading>Loading...</div>',select:'<select {{fieldAttributes}} name="surveyjs-answer-{{questionNumber}}{{addMoreName}}" class="surveyjs-select {{fieldClasses}}">{{optionsHtml}}</select>',textarea:'<textarea {{fieldAttributes}} name="surveyjs-answer-{{questionNumber}}" class="surveyjs-textarea {{fieldClasses}}"></textarea>',wrapper:{field:'<div class="surveyjs-field-wrapper surveyjs-{{answerType}}-wrapper {{wrapperClasses}}">{{fieldTemplate}}{{labelTemplate}}</div>',nested:'<div class="surveyjs-field-wrapper surveyjs-nested-wrapper">{{labelTemplate}}<div class="surveyjs-nested-inner">{{nestedFieldsHTML}}</div></div>',question:'<div class="surveyjs-question-wrapper" data-question-id="{{questionId}}"><div class="surveyjs-question-text">{{questionText}}</div><div class="surveyjs-answers-wrapper">{{answersHTML}}</div><div class="surveyjs-errors-wrapper" data-surveyjs-errors>{{errorTemplates}}</div></div>',related:'<div class="surveyjs-field-wrapper surveyjs-related-wrapper input-group"><div class="input-group-prepend"><div class="surveyjs-radio-wrapper input-group-text form-check">{{fieldTemplate}}{{labelTemplate}}</div></div>{{relatedFieldHTML}}</div>'}}},g.prototype.version="4.0.2",g}));
//# sourceMappingURL=surveyjs.min.js.map
