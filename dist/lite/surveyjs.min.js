/* surveyJS Lite v3.0.2 | Valerio Di Punzio (@SimplySayHi) | https://www.valeriodipunzio.com/plugins/surveyJS/ | https://github.com/SimplySayHi/surveyJS | MIT license */
!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e="undefined"!=typeof globalThis?globalThis:e||self).Survey=r()}(this,(function(){"use strict";function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}function r(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function t(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var s=function(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.href,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.headers=new Headers(t.headers),t.timeout>0){var s=new AbortController,a=s.signal;t.signal=a,e=window.setTimeout((function(){s.abort()}),t.timeout)}return fetch(r,t).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).catch((function(e){throw new Error(e.message)})).finally((function(){e&&window.clearTimeout(e)}))},a=function(e){return Element.prototype.isPrototypeOf(e)},o=function(r){var t=e(r),s="string"===t&&a(document.querySelector(r))&&"form"===document.querySelector(r).tagName.toLowerCase();return{result:a(r)||s,element:"string"===t?document.querySelector(r):r}},n="sjs:init",i=function r(t){return Object.getOwnPropertyNames(t).forEach((function(s){var a=t[s];"object"===e(a)&&null!==a&&r(a)})),Object.freeze(t)},l=function(e){return"[object Object]"===Object.prototype.toString.call(e)},c=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Array.from(arguments).slice(1).filter((function(e){return!!e})).forEach((function(t){Object.keys(t).forEach((function(s){Array.isArray(t[s])?r[s]=(r[s]||[]).concat(t[s].slice(0)):l(t[s])?r[s]=e(r[s]||{},t[s]):Array.isArray(r[s])?r[s].push(t[s]):r[s]=t[s]}))})),r},u=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};s=c({},{bubbles:!0},s);var a=new Event(r,s);a.data=t,e.dispatchEvent(a)},d=function(e){return NodeList.prototype.isPrototypeOf(e)},p=function(e,r){return Object.keys(e).reduce((function(r,t){var s=new RegExp("{{"+t+"}}","g");return r.replace(s,e[t])}),r)},f=function(e){return e[0].sort&&e.sort((function(e,r){return e.sort>r.sort})),e},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return f(e).reduce((function(e,r){return e+'<option value="'.concat(r.value,'">').concat(r.label,"</option>")}),"")},y=function(e,r,t){var s=["data","id","label","nested","related","sort"];/^(option|textarea)$/.test(e.type)&&s.push("type","value");var a="";return Object.keys(e).filter((function(e){return-1===s.indexOf(e)})).forEach((function(r){a+=" ".concat(r,'="').concat(e[r],'"')})),e.data&&Object.keys(e.data).forEach((function(r){a+=" data-".concat(function(){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().replace(/(([_ ])([a-z]))|(([a-z])?([A-Z]))/g,(function(e,r,t,s,a,o,n){return(s?"-"+s:(o||"")+"-"+n).toLowerCase()}));return e?r.toUpperCase():r}(r),'="').concat(e.data[r],'"')})),t&&(a+=" required"),e.related&&(a+=" data-require-more"),(a+=' id="'.concat(r,'"')).trim()},m=function e(r,t,s){var a="",o="";return f(r).forEach((function(n,i){var l,u="option"===n.type?"select":n.type;if("select"!==u||o!==u){o=u,t.question.checks&&(n=c({},n,{data:{checks:t.question.checks}}));var d="".concat(u,"-").concat(t.surveyId,"-").concat(t.question.id,"-").concat("select"===u?i+1:n.id),f={questionNumber:t.question.index+1,wrapperClasses:s.cssClasses.wrapper[u]||s.cssClasses.wrapper.field,fieldAttributes:y(n,d,t.question.isRequired),fieldClasses:s.cssClasses[u]||s.cssClasses.field,answerType:u,answerCode:d,addMoreName:"",labelString:n.label||"",labelClasses:s.cssClasses.label},m="";if(n.related){var b=n.related.type||"select",h="select"===b,w=h?c({},n):n.related;w.type=h?"option":b,w.id="",w.data=c({},w.data,{requiredFrom:"#"+d}),delete w.related;var g={fieldAttributes:y(w,"",!1),answerType:b,addMoreName:"-more",fieldClasses:h?s.cssClasses.select:s.cssClasses[b]||s.cssClasses.field};if(m=s.templates[b]||s.templates.input,h){var j=v(n.related);m=m.replace("{{optionsHtml}}",j)}m=p(g,m)}var q=function(e,r){return{field:r[e]||r.input,label:/^(checkbox|nested|radio|related)$/.test(e)?r.label:"",wrapper:r.wrapper[e]||r.wrapper.field}}(n.related?"related":n.nested?"nested":u,s.templates),C="";n.nested&&(C=e(n.nested,t,s));var T="";"select"===u&&(T=v(r)),l=q.wrapper.replace("{{relatedFieldHTML}}",m).replace("{{fieldTemplate}}",q.field).replace("{{optionsHtml}}",T).replace("{{labelTemplate}}",q.label).replace("{{nestedFieldsHTML}}",C),a+=p(f,l)}})),a},b=function(e,r,t){return f(e).reduce((function(e,s,a){if(s.external)return e;var o=t.templates.wrapper.question,n=s.id,i=a+1,c={surveyId:r,question:{id:n,index:a,isRequired:!!s.required}};s.checks&&(c.question.checks=s.checks);var u=m(s.answers,c,t),d=s.checks?JSON.parse(s.checks):"",f=d[0]||"",v=d[1]||"",y=d&&t.messages.maxChoice?" ("+v+" "+t.messages.maxChoice+")":"",b={questionId:n,questionNumber:i,questionText:s.question+y,answersHTML:u};if(o=p(b,o),t.showErrorMessage){var h=""!==d?t.messages.errorMultiChoice:s.errorMessage||t.messages.error;l(h)&&(h=""),o=o.replace(/{{errorTemplates}}/g,h)}return e+p({checksMin:f,checksMax:v},o)}),"")},h=function(e,r,t){var s=b(e.questions,e.id,t);r.querySelector("[data-surveyjs-body]").insertAdjacentHTML("beforeend",s);var a=e.questions.filter((function(e){return e.external}));if(a.length>0){var o=r.closest("[data-surveyjs-wrapper]");a.forEach((function(r,t){var s=o.querySelector('[data-surveyjs-external="'+(t+1)+'"]');s.setAttribute("data-question-id",r.id),r.answers.forEach((function(t,a){var o=s.querySelectorAll("[data-field]")[a],n={id:"".concat(t.type,"-").concat(e.id,"-").concat(r.id,"-").concat(t.id),type:t.type,value:t.value,required:!!r.required};Object.keys(n).forEach((function(e){o[e]=n[e]}));var i=o.closest("[data-answer]");i.querySelector("label").setAttribute("for",n.id),i.querySelector("[data-label]").innerHTML=t.label,s.querySelector("[data-question]").innerHTML=r.question}))}))}},w=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e);var l=arguments.length,p=o(t);if(0===l||l>0&&!t)throw new Error('First argument "formEl" is missing or falsy!');if(d(t))throw new Error('First argument "formEl" must be a single DOM node or a form CSS selector, not a NodeList!');if(!p.result)throw new Error('First argument "formEl" is not a DOM node nor a form CSS selector!');if(!a.url||"string"!=typeof a.url)throw new Error('"options.url" is missing or not a string!');var f=this;f.formEl=p.element,f.options=c({},e.prototype.options,a),t=f.formEl,a=f.options,t.querySelector("[data-surveyjs-body]").insertAdjacentHTML("beforebegin",a.templates.loading);var v=s(a.url,a.initAjaxOptions).then((function(e){return"success"!==e.status.toLowerCase()?Promise.reject(e):(e.data.questions&&e.data.questions.length>0&&(h(e.data,t,a),Object.defineProperty(f,"data",{value:i(e.data)}),f.isInitialized=!0,t.closest("[data-surveyjs-wrapper]").classList.add("surveyjs-init-success")),e)})).finally((function(){var e=t.querySelector("[data-surveyjs-loading]");e&&e.parentNode.removeChild(e)}));u(t,n,v)}var a,l,p;return a=e,p=[{key:"setOptions",value:function(r){e.prototype.options=c({},e.prototype.options,r)}}],(l=null)&&t(a.prototype,l),p&&t(a,p),e}();return w.prototype.isInitialized=!1,w.prototype.options={cssClasses:{checkbox:"form-check-input",field:"form-control",file:"form-control-file",label:"form-check-label",radio:"form-check-input",wrapper:{checkbox:"form-check",field:"",radio:"form-check"}},initAjaxOptions:{cache:"no-store",credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"},method:"GET",mode:"same-origin",redirect:"follow",timeout:0},messages:{maxChoice:"answers max",error:"Answer is necessary.",errorMultiChoice:"You must choose from {{checksMin}} to {{checksMax}} answers."},showErrorMessage:!0,templates:{error:'<div class="surveyjs-error-message">{{errorMessage}}</div>',input:'<input {{fieldAttributes}} name="surveyjs-answer-{{questionNumber}}{{addMoreName}}" class="surveyjs-input surveyjs-{{answerType}} {{fieldClasses}}" />',label:'<label for="{{answerCode}}" class="surveyjs-label {{labelClasses}}">{{labelString}}</label>',loading:'<div class="surveyjs-loading" data-surveyjs-loading>Loading...</div>',select:'<select {{fieldAttributes}} name="surveyjs-answer-{{questionNumber}}{{addMoreName}}" class="surveyjs-select {{fieldClasses}}">{{optionsHtml}}</select>',textarea:'<textarea {{fieldAttributes}} name="surveyjs-answer-{{questionNumber}}" class="surveyjs-textarea {{fieldClasses}}"></textarea>',wrapper:{field:'<div class="surveyjs-field-wrapper surveyjs-{{answerType}}-wrapper {{wrapperClasses}}">{{fieldTemplate}}{{labelTemplate}}</div>',nested:'<div class="surveyjs-field-wrapper surveyjs-nested-wrapper">{{labelTemplate}}<div class="surveyjs-nested-inner">{{nestedFieldsHTML}}</div></div>',question:'<div class="surveyjs-question-wrapper" data-question-id="{{questionId}}"><div class="surveyjs-question-text">{{questionText}}</div><div class="surveyjs-answers-wrapper">{{answersHTML}}</div><div class="surveyjs-errors-wrapper" data-surveyjs-errors>{{errorTemplates}}</div></div>',related:'<div class="surveyjs-field-wrapper surveyjs-related-wrapper input-group"><div class="input-group-prepend"><div class="surveyjs-radio-wrapper input-group-text form-check">{{fieldTemplate}}{{labelTemplate}}</div></div>{{relatedFieldHTML}}</div>'}}},w.prototype.version="3.0.2",w}));
//# sourceMappingURL=surveyjs.min.js.map
