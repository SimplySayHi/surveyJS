/* surveyJS Lite v4.0.2 | Valerio Di Punzio (@SimplySayHi) | https://www.valeriodipunzio.com/plugins/surveyJS/ | https://github.com/SimplySayHi/surveyJS | MIT license */
System.register([],(function(e){"use strict";return{execute:function(){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function s(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var a=function(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.href,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.headers=new Headers(t.headers),t.timeout>0){var s=new AbortController,a=s.signal;t.signal=a,e=window.setTimeout((function(){s.abort()}),t.timeout)}return fetch(r,t).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).catch((function(e){throw new Error(e.message)})).finally((function(){e&&window.clearTimeout(e)}))},o=function(e){return Element.prototype.isPrototypeOf(e)},n=function(e){var t=r(e),s="string"===t&&o(document.querySelector(e))&&"form"===document.querySelector(e).tagName.toLowerCase();return{result:o(e)||s,element:"string"===t?document.querySelector(e):e}},i="sjs:destroy",l="sjs:init",c=function e(t){return Object.getOwnPropertyNames(t).forEach((function(s){var a=t[s];"object"===r(a)&&null!==a&&e(a)})),Object.freeze(t)},u=function(e){return"[object Object]"===Object.prototype.toString.call(e)},d=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Array.from(arguments).slice(1).filter((function(e){return!!e})).forEach((function(t){Object.keys(t).forEach((function(s){Array.isArray(t[s])?r[s]=(r[s]||[]).concat(t[s].slice(0)):u(t[s])?r[s]=e(r[s]||{},t[s]):Array.isArray(r[s])?r[s].push(t[s]):r[s]=t[s]}))})),r},p=function(e,r,t){t=d({},{bubbles:!0},t);var s=new CustomEvent(r,t);e.dispatchEvent(s)},f=function(e){return NodeList.prototype.isPrototypeOf(e)},v=function(e,r){return Object.keys(e).reduce((function(r,t){var s=new RegExp("{{"+t+"}}","g");return r.replace(s,e[t])}),r)},y=function(e){return e[0].sort&&e.sort((function(e,r){return e.sort>r.sort})),e},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return y(e).reduce((function(e,r){return e+'<option value="'.concat(r.value,'">').concat(r.label,"</option>")}),"")},b=function(e,r,t){var s=["data","id","label","nested","related","sort"];/^(option|textarea)$/.test(e.type)&&s.push("type","value");var a="";return Object.keys(e).filter((function(e){return-1===s.indexOf(e)})).forEach((function(r){a+=" ".concat(r,'="').concat(e[r],'"')})),e.data&&Object.keys(e.data).forEach((function(r){a+=" data-".concat(function(){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().replace(/(([_ ])([a-z]))|(([a-z])?([A-Z]))/g,(function(e,r,t,s,a,o,n){return(s?"-"+s:(o||"")+"-"+n).toLowerCase()}));return e?r.toUpperCase():r}(r),'="').concat(e.data[r],'"')})),t&&(a+=" required"),e.related&&(a+=" data-require-more"),(a+=' id="'.concat(r,'"')).trim()},h=function e(r,t,s){var a="",o="";return y(r).forEach((function(n,i){var l,c="option"===n.type?"select":n.type;if("select"!==c||o!==c){o=c,t.question.checks&&(n=d({},n,{data:{checks:t.question.checks}}));var u="".concat(c,"-").concat(t.surveyId,"-").concat(t.question.id,"-").concat("select"===c?i+1:n.id),p={questionNumber:t.question.index+1,wrapperClasses:s.cssClasses.wrapper[c]||s.cssClasses.wrapper.field,fieldAttributes:b(n,u,t.question.isRequired),fieldClasses:s.cssClasses[c]||s.cssClasses.field,answerType:c,answerCode:u,addMoreName:"",labelString:n.label||"",labelClasses:s.cssClasses.label},f="";if(n.related){var y=n.related.type||"select",h="select"===y,w=h?d({},n):n.related;w.type=h?"option":y,w.id="",w.data=d({},w.data,{requiredFrom:"#"+u}),delete w.related;var g={fieldAttributes:b(w,"",!1),answerType:y,addMoreName:"-more",fieldClasses:h?s.cssClasses.select:s.cssClasses[y]||s.cssClasses.field};if(f=s.templates[y]||s.templates.input,h){var j=m(n.related);f=f.replace("{{optionsHtml}}",j)}f=v(g,f)}var q=function(e,r){return{field:r[e]||r.input,label:/^(checkbox|nested|radio|related)$/.test(e)?r.label:"",wrapper:r.wrapper[e]||r.wrapper.field}}(n.related?"related":n.nested?"nested":c,s.templates),C="";n.nested&&(C=e(n.nested,t,s));var T="";"select"===c&&(T=m(r)),l=q.wrapper.replace("{{relatedFieldHTML}}",f).replace("{{fieldTemplate}}",q.field).replace("{{optionsHtml}}",T).replace("{{labelTemplate}}",q.label).replace("{{nestedFieldsHTML}}",C),a+=v(p,l)}})),a},w=function(e,r,t){return y(e).reduce((function(e,s,a){if(s.external)return e;var o=t.templates.wrapper.question,n=s.id,i=a+1,l={surveyId:r,question:{id:n,index:a,isRequired:!!s.required}};s.checks&&(l.question.checks=s.checks);var c=h(s.answers,l,t),d=s.checks?JSON.parse(s.checks):"",p=d[0]||"",f=d[1]||"",y=d&&t.messages.maxChoice?" ("+f+" "+t.messages.maxChoice+")":"",m={questionId:n,questionNumber:i,questionText:s.question+y,answersHTML:c};if(o=v(m,o),t.showErrorMessage){var b=""!==d?t.messages.errorMultiChoice:s.errorMessage||t.messages.error;u(b)&&(b=""),o=o.replace(/{{errorTemplates}}/g,b)}return e+v({checksMin:p,checksMax:f},o)}),"")},g=function(e,r,t){var s=w(e.questions,e.id,t);r.querySelector("[data-surveyjs-body]").insertAdjacentHTML("beforeend",s);var a=e.questions.filter((function(e){return e.external}));if(a.length>0){var o=r.closest("[data-surveyjs-wrapper]");a.forEach((function(r,t){var s=o.querySelector('[data-surveyjs-external="'+(t+1)+'"]');s.setAttribute("data-question-id",r.id),r.answers.forEach((function(t,a){var o=s.querySelectorAll("[data-field]")[a],n={id:"".concat(t.type,"-").concat(e.id,"-").concat(r.id,"-").concat(t.id),type:t.type,value:t.value,required:!!r.required};Object.keys(n).forEach((function(e){o[e]=n[e]}));var i=o.closest("[data-answer]");i.querySelector("label").setAttribute("for",n.id),i.querySelector("[data-label]").innerHTML=t.label,s.querySelector("[data-question]").innerHTML=r.question}))}))}},j=e("default",function(){function e(r){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(this,e);var o=arguments.length,i=n(r);if(0===o||o>0&&!r)throw new Error('First argument "$form" is missing or falsy!');if(f(r))throw new Error('First argument "$form" must be a single DOM node or a form CSS selector, not a NodeList!');if(!i.result)throw new Error('First argument "$form" is not a DOM node nor a form CSS selector!');if(!s.url||"string"!=typeof s.url)throw new Error('"options.url" is missing or not a string!');var u=this;u.$form=i.element,u.options=d({},e.prototype.options,s),r=u.$form,s=u.options,r.surveyjs=u,r.querySelector("[data-surveyjs-body]").insertAdjacentHTML("beforebegin",s.templates.loading);var v=a(s.url,s.initAjaxOptions).then((function(e){return"success"!==e.status.toLowerCase()?Promise.reject(e):(e.data.questions&&e.data.questions.length>0&&(g(e.data,r,s),Object.defineProperty(u,"data",{value:c(e.data)}),u.isInitialized=!0,r.closest("[data-surveyjs-wrapper]").classList.add("surveyjs-init-success")),e)})).finally((function(){var e=r.querySelector("[data-surveyjs-loading]");e&&e.parentNode.removeChild(e)}));p(r,l,{detail:v})}var r,o,u;return r=e,u=[{key:"setOptions",value:function(r){e.prototype.options=d({},e.prototype.options,r)}}],(o=[{key:"destroy",value:function(){delete this.$form.surveyjs,p(this.$form,i)}}])&&s(r.prototype,o),u&&s(r,u),Object.defineProperty(r,"prototype",{writable:!1}),e}());j.prototype.isInitialized=!1,j.prototype.options={cssClasses:{checkbox:"form-check-input",field:"form-control",file:"form-control-file",label:"form-check-label",radio:"form-check-input",wrapper:{checkbox:"form-check",field:"",radio:"form-check"}},initAjaxOptions:{cache:"no-store",credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"},method:"GET",mode:"same-origin",redirect:"follow",timeout:0},messages:{maxChoice:"answers max",error:"Answer is necessary.",errorMultiChoice:"You must choose from {{checksMin}} to {{checksMax}} answers."},showErrorMessage:!0,templates:{error:'<div class="surveyjs-error-message">{{errorMessage}}</div>',input:'<input {{fieldAttributes}} name="surveyjs-answer-{{questionNumber}}{{addMoreName}}" class="surveyjs-input surveyjs-{{answerType}} {{fieldClasses}}" />',label:'<label for="{{answerCode}}" class="surveyjs-label {{labelClasses}}">{{labelString}}</label>',loading:'<div class="surveyjs-loading" data-surveyjs-loading>Loading...</div>',select:'<select {{fieldAttributes}} name="surveyjs-answer-{{questionNumber}}{{addMoreName}}" class="surveyjs-select {{fieldClasses}}">{{optionsHtml}}</select>',textarea:'<textarea {{fieldAttributes}} name="surveyjs-answer-{{questionNumber}}" class="surveyjs-textarea {{fieldClasses}}"></textarea>',wrapper:{field:'<div class="surveyjs-field-wrapper surveyjs-{{answerType}}-wrapper {{wrapperClasses}}">{{fieldTemplate}}{{labelTemplate}}</div>',nested:'<div class="surveyjs-field-wrapper surveyjs-nested-wrapper">{{labelTemplate}}<div class="surveyjs-nested-inner">{{nestedFieldsHTML}}</div></div>',question:'<div class="surveyjs-question-wrapper" data-question-id="{{questionId}}"><div class="surveyjs-question-text">{{questionText}}</div><div class="surveyjs-answers-wrapper">{{answersHTML}}</div><div class="surveyjs-errors-wrapper" data-surveyjs-errors>{{errorTemplates}}</div></div>',related:'<div class="surveyjs-field-wrapper surveyjs-related-wrapper input-group"><div class="input-group-prepend"><div class="surveyjs-radio-wrapper input-group-text form-check">{{fieldTemplate}}{{labelTemplate}}</div></div>{{relatedFieldHTML}}</div>'}}},j.prototype.version="4.0.2"}}}));
//# sourceMappingURL=surveyjs-systemjs.min.js.map
