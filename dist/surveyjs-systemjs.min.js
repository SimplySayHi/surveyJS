/* surveyJS v3.0.0 | Valerio Di Punzio (@SimplySayHi) | https://www.valeriodipunzio.com/plugins/surveyJS/ | https://github.com/SimplySayHi/surveyJS | MIT license */
System.register(["formjs-plugin"],(function(e){"use strict";var t;return{setters:[function(e){t=e.default}],execute:function(){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?c(e):t}function f(e){var t=u();return function(){var r,a=i(e);if(t){var s=i(this).constructor;r=Reflect.construct(a,arguments,s)}else r=a.apply(this,arguments);return d(this,r)}}function p(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e}function v(e,t,r){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var a=p(e,t);if(a){var s=Object.getOwnPropertyDescriptor(a,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}var m=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.href,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r.headers=new Headers(r.headers),r.timeout>0){var a=new AbortController,s=a.signal;r.signal=s,e=window.setTimeout((function(){a.abort()}),r.timeout)}return fetch(t,r).then((function(e){return e.ok?e.json():Promise.reject(e)})).catch((function(e){return Promise.reject(e)})).finally((function(){e&&window.clearTimeout(e)}))},y=function(e,t){var r=document.createElement("div");r.innerHTML=e,Array.from(r.childNodes).forEach((function(e){t.appendChild(e)}))},g=function e(t){return Object.getOwnPropertyNames(t).forEach((function(a){var s=t[a];"object"===r(s)&&null!==s&&e(s)})),Object.freeze(t)},h='[data-surveyjs-form] input:not([type="reset"]):not([type="submit"]):not([type="button"]), [data-surveyjs-form] select, [data-surveyjs-form] textarea, [data-name="bind-surveyjs-answer"]',w=function(e){return"[object Object]"===Object.prototype.toString.call(e)},b=function(e){return w(e)&&0===Object.getOwnPropertyNames(e).length},j=function(e){return e.matches('select, [type="radio"], [type="checkbox"], [type="file"]')},q=function e(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=1;r<arguments.length;r++){var a=arguments[r];if(a)for(var s in a){var n=Array.isArray(a[s]),o=w(a[s]);a.hasOwnProperty(s)&&(n?(void 0===t[s]&&(t[s]=[]),t[s]=t[s].concat(a[s].slice(0))):o?t[s]=e(t[s],a[s]):Array.isArray(t[s])?t[s].push(a[s]):t[s]=a[s])}}return t},x=function(){var e=function(){var e="check_storage";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}();return e&&(Storage.prototype.setObject=function(e,t){this.setItem(e,JSON.stringify(t))},Storage.prototype.getObject=function(e){var t=this.getItem(e);return t&&JSON.parse(t)}),{isAvailable:e}},C={it:{loadingBox:'<div class="surveyjs-loading" data-surveyjs-loading><i class="glyphicon glyphicon-refresh icon-spin"></i> Caricamento in corso...</div>',selectFirstOption:"Seleziona una risposta...",textareaPlaceholder:"Scrivi la tua risposta...",maxChoiceText:"RISPOSTE MAX",fieldErrorMessage:"&Egrave; necessario rispondere.",fieldErrorMessageMultiChoice:"Puoi scegliere da {{checksMin}} a {{checksMax}} risposte."},en:{loadingBox:'<div class="surveyjs-loading" data-surveyjs-loading><i class="glyphicon glyphicon-refresh icon-spin"></i> Loading...</div>',selectFirstOption:"Select your answer...",textareaPlaceholder:"Write here your answer...",maxChoiceText:"ANSWERS MAX",fieldErrorMessage:"Answer is necessary.",fieldErrorMessageMultiChoice:"You can choose from {{checksMin}} to {{checksMax}} answers."}},S=function(e,t){for(var r=e.questions,a=r.length,s={},n=0;n<a;n++){var o=r[n];if(o.id==t){s=o;break}}return s},A={formOptions:{beforeSend:function(e){var t=this,r=this.formEl.formjs,a=this.formEl.closest("[data-surveyjs-container]"),s=Array.from(a.querySelectorAll(h)),n="",o="";s.forEach((function(e){var t=e.type,a=e.name;if(a!==n||t!==o){e.matches("[data-required-from]")||(n=a,o=t);var s=e.closest("[data-question-id]"),i=s?s.getAttribute("data-question-id"):"",l=S(r.data,i);if(""!==i&&l&&void 0!==l.required){var u=e.matches("[data-required-from]"),c=document.querySelector(e.getAttribute("data-required-from"));(!u||u&&c.checked)&&(e.required=!0)}}}));var i=q({},r.options.fieldOptions,{focusOnRelated:!1});return new Promise((function(r){t.formEl.formjs.validateForm(i).then((function(t){t.result||(e.stopExecution=!0),r(e)}))}))},getFormData:function(){var e=this.formEl,t=e.formjs,r=Array.from(e.closest("[data-surveyjs-container]").querySelectorAll(h)),a={answers:[],id:t.data.id},s="",n="";return r.forEach((function(r){var o=r.type,i=r.name;if(i!==s||o!==n){r.matches("[data-required-from]")||(s=i,n=o);var l=r.closest("[data-question-id]"),u=l?l.getAttribute("data-question-id"):"",c=r.value,d={question:u,answer:{id_answer:[c]}};if(!r.matches("[data-required-from]")&&""!==u&&!b(S(t.data,u))){if(r.matches("textarea")&&(d.answer.id_answer=[""],d.answer.text=c),"radio"===o){var f=(r.closest("form")?e:r.closest("[data-formjs-question]")).querySelector('[name="'+i+'"]:checked');f?(f.matches("[data-require-more]")&&(d.answer.attributes=e.querySelector('[data-required-from="#'+f.id+'"]').value.trim()),f.matches("[data-nested-index]")&&(d.answer.attributes=f.getAttribute("data-nested-index")),d.answer.id_answer=[f.value.trim()]):d.answer.id_answer=[""]}"checkbox"===o&&r.matches("[data-checks]")&&(d.answer.id_answer=[],Array.from(e.querySelectorAll('[name="'+i+'"]:checked')).forEach((function(e){d.answer.id_answer.push(e.value.trim())}))),a.answers.push(d)}}})),a}}},E={cssClasses:{checkbox:"form-check-input",default:"form-control",file:"form-control-file",label:"form-check-label",radio:"form-check-input",select:"form-control",textarea:"form-control"},fieldErrorFeedback:!0,formOptions:{beforeSend:[A.formOptions.beforeSend],getFormData:A.formOptions.getFormData},initAjaxOptions:{cache:"no-store",credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"},method:"GET",mode:"same-origin",redirect:"follow",timeout:0},lang:"en",templates:{fieldError:'<div class="surveyjs-field-error-message">{{fieldErrorMessage}}</div>',input:'<div class="surveyjs-single-answer surveyjs-input-container surveyjs-answer-{{answerType}} form-check" data-answer-index="{{answerIndex}}">{{inputTagCode}}{{labelTagCode}}</div>',inputGroup:'<div class="surveyjs-single-answer input-group" data-answer-index="{{answerIndex}}"><div class="input-group-prepend"><div class="input-group-text form-check surveyjs-answer-{{answerType}}"><input type="{{answerType}}" name="surveyjs-answer-{{questionNumber}}" id="{{answerCode}}" data-answer-id="{{answerId}}" value="{{answerIdValue}}" {{attrRequired}} data-require-more="" class="surveyjs-input surveyjs-radio form-check-input" /><label for="{{answerCode}}" class="surveyjs-label form-check-label">{{answerString}}</label></div></div>{{relatedAnswerField}}</div>',inputTag:'<input type="{{answerType}}" {{attrSubtype}} name="surveyjs-answer-{{questionNumber}}{{addMoreName}}" class="surveyjs-input surveyjs-{{answerType}} {{fieldClass}}" id="{{answerCode}}" {{nestedAnswer}} data-answer-root="{{progIdsJoined}}" data-answer-id="{{answerId}}" value="{{answerIdValue}}" {{attrRequired}} {{validateIfFilled}} {{attrChecks}} {{attrRequiredFrom}} />',labelTag:'<label for="{{answerCode}}" class="surveyjs-label {{labelClass}}">{{answerString}}</label>',question:'<div data-question-id="{{questionId}}" data-question-index="{{questionNumber}}" data-formjs-question class="surveyjs-question-box clearfix"><div class="surveyjs-question-header">Question {{questionNumber}}</div><div class="surveyjs-question-body"><div class="surveyjs-question-text">{{questionText}}</div><div class="surveyjs-answers-box form-group clearfix">{{answersHtml}}{{fieldErrorTemplate}}</div></div></div>',select:'<div class="surveyjs-single-answer surveyjs-answer-select" data-answer-index="{{answerIndex}}">{{selectTagCode}}</div>',selectTag:'<select id="{{answerCode}}" name="surveyjs-answer-{{questionNumber}}{{addMoreName}}" class="surveyjs-select {{fieldClass}}" {{attrRequired}} {{nestedAnswer}} data-answer-root="{{progIdsJoined}}" {{attrRequiredFrom}}>{{optionsHtml}}</select>',textarea:'<div class="surveyjs-single-answer surveyjs-answer-textarea"><textarea id="{{answerCode}}" data-answer-id="{{answerId}}" {{nestedAnswer}} name="surveyjs-answer-{{questionNumber}}" {{attrRequired}} class="surveyjs-textarea {{fieldClass}}" {{answerMaxlength}} rows="6" placeholder="{{answerPlaceholder}}"></textarea></div>'},useLocalStorage:!0},O={storageArray:[],storageName:"Survey_"+location.href+"_{{surveyFormName}}_surveyId[{{surveyId}}]"},k=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=localStorage.getObject(e.storageName);if(a)for(var s=a.length,n=0;n<s;n++){var o=a[n];if(o.field===t){if(r&&o.value!==r)continue;return n}}return-1},T={validation:function(e){var t=e.type,r=e.target,a=r.closest("form").formjs,s=a.internals,n=r.closest("[data-formjs-question]"),o=r.value?r.value.trim():r.value,i=r.matches("[data-checks]"),l=r.matches("[data-require-more]"),u=r.matches("[data-required-from]"),c=u?n.querySelector(r.getAttribute("data-required-from")):null,d=u?c:r,f=d.id?d.id.split("-")[1]:"id-not-found",p=j(r),v=S(a.data,f);if(b(v))return!0;if(p&&"change"===t||!p&&"change"!==t){if(a.options.useLocalStorage&&!r.matches("[data-exclude-storage]")){var m=k(s,r.name,!!i&&o),y=k(s,r.name+"-more"),g=s.storageArray;if(l||u||-1===y||g.splice(y,1),-1!==m)i?r.checked||g[m].value!==o?g.push({field:r.name,value:o}):g.splice(m,1):""!==o?g[m].value=o:g.splice(m,1);else if(""!==o){if(u&&""!==o){var h=k(s,c.name);-1!==h&&g.splice(h,1),g.push({field:c.name,value:c.value.trim()})}if(g.push({field:r.name,value:o}),l){var w=r.closest("form").querySelector('[data-required-from="#'+r.id+'"]');g.push({field:w.name,value:w.value.trim()})}}localStorage.setObject(s.storageName,g)}void 0!==v.required&&(r.required=!0)}}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=""===e[0].id?"":'<option value="">'+t.selectFirstOption+"</option>";return e.forEach((function(e){r+='<option value="'+e.id+'" data-answer-id="'+e.id+'">'+e.answer+"</option>"})),r},N=function(e,t){var r=t.objData,a=e.templates.inputGroup,s=t.answer.attribute,n=Array.isArray(s),o=n?e.templates.selectTag:e.templates.inputTag;return r.fieldClass=e.cssClasses.default,n&&(r.fieldClass=e.cssClasses.select,r.optionsHtml=I(s,e)),{aHtml:a,relatedAnswerField:o,objData:r}},H=function(e,t){var r=t.objData,a=t.beforeCode+e.templates.input+t.afterCode;return"checkbox"!==r.answerType&&"radio"!==r.answerType&&(r.nestedAnswer+=' class="'+r.fieldClass+'"'),{aHtml:a,objData:r}},M=function(e,t){var r=t.objData,a=e.templates.labelTag;return a=(a=(a=a.replace(/{{answerCode}}/g,r.answerCode)).replace(/{{labelClass}}/g,e.cssClasses.label+" surveyjs-field-indent-0")).replace(/{{answerString}}/g,t.answer.answer),{aHtml:t.beforeCode+'<div class="surveyjs-'+r.answerType+'">'+a+"</div>"+t.afterCode,objData:r}},F=function(e,t){var r=t.objData,a=t.beforeCode+e.templates.select+t.afterCode;return r.optionsHtml=I(t.obj.answers,e),{aHtml:a,objData:r}},R=function(e,t){var r=t.objData,a=e.templates.textarea;return r.answerPlaceholder=t.answer.placeholder||e.textareaPlaceholder,{aHtml:a,objData:r}},P={attribute:N,input:H,nested:M,select:F,textarea:R},D=function(e,t,r){if(""!==r.optionsHtml&&(t.aHtml=t.aHtml.replace(/{{selectTagCode}}/g,e.templates.selectTag)),t.relatedAnswerField){var a={answerCode:"",answerType:"text",fieldClass:r.fieldClass,answerIdValue:"",attrRequired:"",addMoreName:"-more",attrRequiredFrom:'data-required-from="#'+r.answerCode+'"'};for(var s in a){var n=new RegExp("{{"+s+"}}","g");t.relatedAnswerField=t.relatedAnswerField.replace(n,a[s])}t.aHtml=t.aHtml.replace(/{{relatedAnswerField}}/g,t.relatedAnswerField)}else t.aHtml=t.aHtml.replace(/{{addMoreName}}/g,""),t.aHtml=t.aHtml.replace(/{{attrRequiredFrom}}/g,"");for(var o in r){var i=new RegExp("{{"+o+"}}","g");t.aHtml=t.aHtml.replace(i,r[o])}return t.aHtml},_=[],L=function e(t,r,a,s,n,o){s=a.id?a.id:s||0;var i=Array.isArray(a)?a:a.answers,l=i.length,u=n||0,c="",d="hidden-privacy"===a.question;i[0].sort&&i.sort((function(e,t){return e.sort>t.sort}));for(var f=function(n){var f=i[n],v=n+1,m=u+1,y=f.type,g=f.id,h=_.length,w=h>0?_.join("-"):"",b={aHtml:""},j={labelTagCode:"checkbox"===y||"radio"===y?r.templates.labelTag:"",answerId:g,answerIdValue:"text"===y?"":g,answerIndex:v,answerName:"surveyjs-answer-"+m,answerPlaceholder:"",answerMaxlength:f.maxlength?'maxlength="'+f.maxlength+'"':"",answerString:"string"==typeof f.answer?f.answer:"",answerType:y,attrRequired:void 0!==a.required?"required":void 0!==o?o:"",fieldClass:function(){var e="option"===f.type?"select":f.type;return p=n,r.cssClasses[e]||r.cssClasses.default}(),nestedAnswer:""!==w?'data-nested-index="'+v+'"':"",optionsHtml:"",progIdsJoined:w,questionNumber:m,answerCode:("option"===y?"select":y)+"-"+s+"-"+(g||0)+"-"+m+(""!==w?"-"+w:"")+"-"+v,attrChecks:a.checks?'data-checks="'+a.checks+'"':"",attrSubtype:f.subtype?'data-subtype="'+f.subtype+'"':"",validateIfFilled:void 0!==a.validateIfFilled?"data-validate-if-filled":""};if(d){var q=t.closest("[data-surveyjs-container]").querySelectorAll('[data-name="bind-surveyjs-answer"]')[n],x={id:j.answerCode,name:j.answerName,type:y,value:j.answerId};for(var C in void 0!==a.required&&(x.required=!0),x)q[C]=x[C];return q.setAttribute("data-answer-id",j.answerId),q.closest("div").querySelector("label").setAttribute("for",j.answerCode),q.closest("div").querySelector("label span").textContent=f.answer,p=n,"continue"}if("string"==typeof f.answer||"number"==typeof f.answer){var S=f.attribute?"attribute":f.nested?"nested":"option"===y?"select":y,A={answer:f,objData:j,beforeCode:h>0&&0===n?'<div class="surveyjs-field-indent">':"",afterCode:h>0&&n===l-1?"</div>":"",obj:a};if(void 0===P[S]&&(S="input"),j=(b=P[S](r,A)).objData,f.nested)return _.push(v),c+=b.aHtml,c+=e(t,r,f.nested,s,u,j.attrRequired),p=n,"continue";h>0&&n===l-1&&_.pop()}b.aHtml=D(r,b,j),c+=b.aHtml,"option"===y&&(n+=a.answers.length),p=n},p=0;p<l;p++)f(p);return c},J=function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=r[0].sort?r.sort((function(e,t){return e.sort>t.sort})):r,s=a.length,n="",o=0;o<s;o++){var i=a[o],l=i.checks?JSON.parse(i.checks):"",u=l.length>0?l[0]:"",c=l.length>0?l[1]:"",d="",f=t.templates.question;if(d+=L(e,t,i,i.id,o),"hidden-privacy"===i.question){var p=e.closest("[data-surveyjs-container]").querySelector('[data-name="bind-surveyjs-answer"]');if(p){p.closest("[data-formjs-question]").setAttribute("data-question-id",i.id);continue}}if(f=(f=(f=(f=(f=f.replace(/{{questionId}}/g,i.id)).replace(/{{questionNumber}}/g,o+1)).replace(/{{questionText}}/g,i.question+(""!==l?" ("+c+" "+t.maxChoiceText+")":""))).replace(/{{answersHtml}}/g,d)).replace(/{{fieldErrorTemplate}}/g,t.fieldErrorFeedback?t.templates.fieldError:""),t.fieldErrorFeedback&&-1!==t.templates.fieldError.indexOf("{{fieldErrorMessage}}")){var v=""!==l?t.fieldErrorMessageMultiChoice:t.fieldErrorMessage;f=f.replace(/{{fieldErrorMessage}}/g,v).replace(/{{checksMin}}/g,u).replace(/{{checksMax}}/g,c)}n+=f}return n},z=function(e,t){var r=localStorage.getObject(t.storageName);if(r){var a=e.closest("[data-surveyjs-container]");t.storageArray=r,r.forEach((function(e){var t=a.querySelector('[name="'+e.field+'"]'),r=t.matches('[type="radio"], [type="checkbox"]'),s=r?a.querySelector('[name="'+e.field+'"][value="'+e.value+'"]'):t;r?s.checked=!0:s.value=e.value}))}},V=function(e,t,r,a){var s=e.formjs,n=e.getAttribute("name")||"",o=e.closest("[data-surveyjs-container]");s.internals.storageName=r.storageName.replace(/{{surveyId}}/g,a.id),s.internals.storageName=r.storageName.replace(/{{surveyFormName}}/g,n);var i=function(e){return void 0!==e?e:""};o.querySelector("[data-surveyjs-title]")&&(o.querySelector("[data-surveyjs-title]").textContent=i(a.title)),o.querySelector("[data-surveyjs-description]")&&(o.querySelector("[data-surveyjs-description]").textContent=i(a.description));var l=J(e,t,a.questions);y(l,e.querySelector("[data-surveyjs-body]")),t.useLocalStorage&&z(e,s.internals);var u=e.querySelector("[data-surveyjs-loading]");u&&u.parentNode.removeChild(u)},B=function(e){e.formjs.options.fieldOptions.validateOnEvents.split(" ").forEach((function(t){var r="blur"===t;e.removeEventListener(t,T.validation,r)}))},G="3.0.0",W=e("default",function(e){o(r,e);var t=f(r);function r(e){var s,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(a(this,r),!n.url||"string"!=typeof n.url)throw new Error('"options.url" is missing or not a string!');var o="string"==typeof n.lang&&n.lang.toLowerCase(),i=o&&r.prototype.messages[o]?o:r.prototype.options.lang,l=q({},r.prototype.options,r.prototype.messages[i],n);return-1!==l.templates.input.indexOf("{{inputTagCode}}")&&(l.templates.input=l.templates.input.replace(/{{inputTagCode}}/g,l.templates.inputTag)),l.templates.labelTag=l.templates.labelTag.replace(/{{labelClass}}/g,l.cssClasses.label),x().isAvailable||(l.useLocalStorage=!1),(s=t.call(this,e,l)).internals=O,s.options.fieldOptions.validateOnEvents.split(" ").forEach((function(t){var r="blur"===t;e.addEventListener(t,T.validation,r)})),e.addEventListener("fjs.form:submit",(function(e){e.data.then((function(){l.useLocalStorage&&localStorage.removeItem(s.internals.storageName)}))})),s}return n(r,[{key:"destroy",value:function(){B(this.formEl),v(i(r.prototype),"destroy",this).call(this)}},{key:"init",value:function(){var e=this,t=this,a=t.formEl,s=t.options;return a.querySelector("[data-surveyjs-body]").insertAdjacentHTML("beforebegin",s.loadingBox),m(s.url,s.initAjaxOptions).then((function(n){return"success"===n.status.toLowerCase()&&n.data.questions&&n.data.questions.length>0?new Promise((function(o){V(a,s,t.internals,n.data),v(i(r.prototype),"init",e).call(e).then((function(){t.isInitialized=!0,t.data=n.data,g(t.data),a.closest("[data-surveyjs-container]").classList.add("surveyjs-init-success"),o(n)}))})):Promise.reject(n)}))}}],[{key:"addLanguage",value:function(e,t){var a=e.toLowerCase();r.prototype.messages[a]=q({},r.prototype.messages[a],t)}},{key:"setOptions",value:function(e){r.prototype.options=q({},r.prototype.options,e)}}]),r}(t));W.prototype.isInitialized=!1,W.prototype.messages=C,W.prototype.options=E,W.prototype.version=G}}}));
//# sourceMappingURL=surveyjs-systemjs.min.js.map
