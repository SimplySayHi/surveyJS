/* surveyJS v3.0.0 | Valerio Di Punzio (@SimplySayHi) | https://www.valeriodipunzio.com/plugins/surveyJS/ | https://github.com/SimplySayHi/surveyJS | MIT license */
var Survey=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=t(e);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?d(e):t}function p(e){var t=l();return function(){var r,a=u(e);if(t){var s=u(this).constructor;r=Reflect.construct(a,arguments,s)}else r=a.apply(this,arguments);return f(this,r)}}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}function m(e,t,r){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var a=v(e,t);if(a){var s=Object.getOwnPropertyDescriptor(a,t);return s.get?s.get.call(r):s.value}})(e,t,r||e)}var y=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.href,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r.headers=new Headers(r.headers),r.timeout>0){var a=new AbortController,s=a.signal;r.signal=s,e=window.setTimeout((function(){a.abort()}),r.timeout)}return fetch(t,r).then((function(e){return e.ok?e.json():Promise.reject(e)})).catch((function(e){return Promise.reject(e)})).finally((function(){e&&window.clearTimeout(e)}))},h=function(e,t,r){return e.splice(r,0,e.splice(t,1)[0]),e},b={init:"sjs:init"},g=function e(t){return Object.getOwnPropertyNames(t).forEach((function(r){var s=t[r];"object"===a(s)&&null!==s&&e(s)})),Object.freeze(t)},j=function(e){return"[object Object]"===Object.prototype.toString.call(e)},w=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Array.from(arguments).slice(1).filter((function(e){return!!e})).forEach((function(r){Object.keys(r).forEach((function(a){Array.isArray(r[a])?t[a]=(t[a]||[]).concat(r[a].slice(0)):j(r[a])?t[a]=e(t[a]||{},r[a]):Array.isArray(t[a])?t[a].push(r[a]):t[a]=r[a]}))})),t},q=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};a=w({},{bubbles:!0},a);var s=new Event(t,a);s.data=r,e.dispatchEvent(s)},S='[data-surveyjs-form] input:not([type="reset"]):not([type="submit"]):not([type="button"]), [data-surveyjs-form] select, [data-surveyjs-form] textarea, [data-name="bind-surveyjs-answer"]',O=function(e){var t=e.closest("[data-question-id]");return t&&t.getAttribute("data-question-id")||""},k=function(e){return j(e)&&0===Object.getOwnPropertyNames(e).length},E=function(e,t){return Object.keys(e).reduce((function(t,r){var a=new RegExp("{{"+r+"}}","g");return t.replace(a,e[r])}),t)},A=function(e){return e[0].sort&&e.sort((function(e,t){return e.sort>t.sort})),e},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.trim().replace(/(([_ ])([a-z]))|(([a-z])?([A-Z]))/g,(function(e,t,r,a,s,o,n){return(a?"-"+a:(o||"")+"-"+n).toLowerCase()}));return t?r.toUpperCase():r},T=function(){var e=function(){var e="check_storage";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}();return e&&(Storage.prototype.setObject=function(e,t){this.setItem(e,JSON.stringify(t))},Storage.prototype.getObject=function(e){var t=this.getItem(e);return t&&JSON.parse(t)}),{isAvailable:e}},x=function(e,t){for(var r=e.questions,a=r.length,s={},o=0;o<a;o++){var n=r[o];if(n.id==t){s=n;break}}return s},M={formOptions:{getFormData:function(){var e=this,t=e.formEl,r=Array.from(t.closest("[data-surveyjs-wrapper]").querySelectorAll(S)),a={answers:[],id:e.data.id},s="",o="";return r.forEach((function(r){var n=r.type,i=r.name;if(i!==s||n!==o){r.matches("[data-required-from]")||(s=i,o=n);var u=O(r),c={question:u,answer:{value:r.value||""}};if(!r.matches("[data-required-from]")&&""!==u&&!k(x(e.data,u))){if("radio"===n){var l=(r.closest("form")?t:r.closest(e.options.fieldOptions.questionContainer)).querySelector('[name="'+i+'"]:checked');c.answer.value=l&&l.value||"",l&&l.matches("[data-require-more]")&&(c.answer.related=t.querySelector('[data-required-from="#'+l.id+'"]').value)}"checkbox"===n&&r.matches("[data-checks]")&&(c.answer.value=[],Array.from(t.querySelectorAll('[name="'+i+'"]:checked')).forEach((function(e){c.answer.value.push(e.value)}))),a.answers.push(c)}}})),a}}},N={cssClasses:{checkbox:"form-check-input",default:"form-control",file:"form-control-file",label:"form-check-label",radio:"form-check-input",wrapper:{checkbox:"form-check",default:"",radio:"form-check"}},fieldErrorFeedback:!0,formOptions:{getFormData:M.formOptions.getFormData},initAjaxOptions:{cache:"no-store",credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"},method:"GET",mode:"same-origin",redirect:"follow",timeout:0},messages:{maxChoice:"ANSWERS MAX",errorMessage:"Answer is necessary.",errorMessageMultiChoice:"You must choose from {{checksMin}} to {{checksMax}} answers."},templates:{error:'<div class="surveyjs-error-message">{{errorMessage}}</div>',input:'<input {{fieldAttributes}} name="surveyjs-answer-{{questionNumber}}{{addMoreName}}" class="surveyjs-input surveyjs-{{answerType}} {{fieldClasses}}" />',label:'<label for="{{answerCode}}" class="surveyjs-label {{labelClasses}}">{{labelString}}</label>',loading:'<div class="surveyjs-loading" data-surveyjs-loading>Loading...</div>',question:'<div class="surveyjs-question-wrapper" data-question-id="{{questionId}}" data-formjs-question><div class="surveyjs-question-body"><div class="surveyjs-question-text">{{questionText}}</div><div class="surveyjs-answers-wrapper form-group">{{answersHTML}}{{errorsHTML}}</div></div></div>',select:'<select {{fieldAttributes}} name="surveyjs-answer-{{questionNumber}}{{addMoreName}}" class="surveyjs-select {{fieldClasses}}">{{optionsHtml}}</select>',textarea:'<textarea {{fieldAttributes}} name="surveyjs-answer-{{questionNumber}}" class="surveyjs-textarea {{fieldClasses}}"></textarea>',wrapper:{default:'<div class="surveyjs-field-wrapper surveyjs-wrapper-{{answerType}} {{wrapperClasses}}">{{fieldTemplate}}{{labelTemplate}}</div>',errors:'<div class="surveyjs-errors-wrapper" data-surveyjs-errors>{{errorTemplates}}</div>',nested:'<div class="surveyjs-field-wrapper surveyjs-nested-parent surveyjs-wrapper-{{answerType}}">{{labelTemplate}}<div class="surveyjs-nested-container surveyjs-field-indent">{{nestedFieldsHTML}}</div></div>',related:'<div class="surveyjs-field-wrapper input-group {{wrapperClasses}}"><div class="input-group-prepend"><div class="input-group-text form-check surveyjs-wrapper-radio">{{fieldTemplate}}{{labelTemplate}}</div></div>{{relatedFieldHTML}}</div>'}},useWebStorage:!0},L={storageArray:[],storageName:"Survey_"+location.href+"_{{surveyFormName}}_surveyId[{{surveyId}}]"};function H(e){var t=e.target.formjs;e.data.then((function(){t.options.useWebStorage&&sessionStorage.removeItem(t.internals.storageName)}))}var F=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=sessionStorage.getObject(e.storageName);if(a)for(var s=a.length,o=0;o<s;o++){var n=a[o];if(n.name===t){if(r&&n.value!==r)continue;return o}}return-1};function P(e){var t=e.data.fieldEl,r=e.data.errors,a=e.target.formjs,s=O(t),o=x(a.data,s);if(k(o))return!0;if(r&&isPlainObject(o.errorMessage)){var n=Object.keys(r);if(r.rule){var i=n.indexOf("rule");n=h(n,i,0)}var u=t.closest(a.options.fieldOptions.questionContainer).querySelector("[data-surveyjs-errors]"),c=n.reduce((function(e,t){var r=o.errorMessage[t]||"";return e+(r?a.options.templates.error.replace("{{errorMessage}}",r):"")}),"");u.innerHTML=c}if(a.options.useWebStorage&&!t.matches("[data-exclude-storage]")){var l=a.internals,d=t.value,f=t.matches("[data-required-from]"),p=t.matches("[data-checks]"),v=t.matches("[data-require-more]"),m=f?document.querySelector(t.getAttribute("data-required-from")):null,y=F(l,t.name,!!p&&d),b=F(l,t.name+"-more"),g=l.storageArray;if(v||f||-1===b||g.splice(b,1),-1!==y)p?t.checked||g[y].value!==d?g.push({name:t.name,value:d}):g.splice(y,1):""!==d?g[y].value=d:g.splice(y,1);else if(""!==d){if(f&&""!==d){var j=F(l,m.name);-1!==j&&g.splice(j,1),g.push({name:m.name,value:m.value})}if(g.push({name:t.name,value:d}),v){var w=t.closest("form").querySelector('[data-required-from="#'+t.id+'"]');g.push({name:w.name,value:w.value})}}sessionStorage.setObject(l.storageName,g)}o.required&&!t.required&&(t.required=!0,a.validateField(t))}var I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return A(e).reduce((function(e,t){return e+'<option value="'.concat(t.value,'">').concat(t.label,"</option>")}),"")},R=function(e,t,r){var a=["data","id","label","nested","related","sort"];/^(option|textarea)$/.test(e.type)&&a.push("type","value");var s="";return Object.keys(e).filter((function(e){return-1===a.indexOf(e)})).forEach((function(t){s+=" ".concat(t,'="').concat(e[t],'"')})),e.data&&Object.keys(e.data).forEach((function(t){s+=" data-".concat(C(t),'="').concat(e.data[t],'"')})),r&&(s+=" required"),e.related&&(s+=" data-require-more"),(s+=' id="'.concat(t,'"')).trim()},_=function(e,t){return{field:t[e]||t.input,label:/^(checkbox|nested|radio|related)$/.test(e)?t.label:"",wrapper:t.wrapper[e]||t.wrapper.default}},D=function e(t,r,a){var s="",o="";return A(t).forEach((function(n,i){var u,c="option"===n.type?"select":n.type;if("select"!==c||o!==c){o=c,r.question.checks&&(n=w({},n,{data:{checks:r.question.checks}}));var l="".concat(c,"-").concat(r.surveyId,"-").concat(r.question.id,"-").concat("select"===c?i+1:n.id),d={questionNumber:r.question.index+1,wrapperClasses:a.cssClasses.wrapper[c]||a.cssClasses.wrapper.default,fieldAttributes:R(n,l,r.question.isRequired),fieldClasses:a.cssClasses[c]||a.cssClasses.default,answerType:c,answerCode:l,addMoreName:"",labelString:n.label||"",labelClasses:a.cssClasses.label},f="";if(n.related){var p=n.related.type||"select",v="select"===p,m=v?w({},n):n.related;m.type=v?"option":p,m.id="",m.data=w({},m.data,{requiredFrom:"#"+l}),delete m.related;var y={fieldAttributes:R(m,"",!1),answerType:p,addMoreName:"-more",fieldClasses:v?a.cssClasses.select:a.cssClasses[p]||a.cssClasses.default};if(f=a.templates[p]||a.templates.input,v){var h=I(n.related);f=f.replace("{{optionsHtml}}",h)}f=E(y,f)}var b=n.related?"related":n.nested?"nested":c,g=_(b,a.templates),j="";n.nested&&(j=e(n.nested,r,a));var q="";"select"===c&&(q=I(t)),u=g.wrapper.replace("{{relatedFieldHTML}}",f).replace("{{fieldTemplate}}",g.field).replace("{{optionsHtml}}",q).replace("{{labelTemplate}}",g.label).replace("{{nestedFieldsHTML}}",j),s+=E(d,u)}})),s},W=function(e,t,r){return A(e).reduce((function(e,a,s){if(a.external)return e;var o=r.templates.question,n=a.id,i=s+1,u={surveyId:t,question:{id:n,index:s,isRequired:!!a.required}};a.checks&&(u.question.checks=a.checks);var c=D(a.answers,u,r),l=a.checks?JSON.parse(a.checks):"",d=l[0]||"",f=l[1]||"",p=l&&r.messages.maxChoice?" ("+f+" "+r.messages.maxChoice+")":"",v={questionId:n,questionNumber:i,questionText:a.question+p,answersHTML:c,errorsHTML:r.fieldErrorFeedback?r.templates.wrapper.errors:""};if(o=E(v,o),r.fieldErrorFeedback){var m=""!==l?r.messages.errorMessageMultiChoice:a.errorMessage||r.messages.errorMessage;j(m)&&(m=""),o=o.replace(/{{errorTemplates}}/g,m)}return e+E({checksMin:d,checksMax:f},o)}),"")},z=function(e,t,r,a){var s=t.getAttribute("name")||"";a.storageName=a.storageName.replace(/{{surveyId}}/,e.id),a.storageName=a.storageName.replace(/{{surveyFormName}}/,s);var o=W(e.questions,e.id,r);t.querySelector("[data-surveyjs-body]").insertAdjacentHTML("beforeend",o);var n=e.questions.filter((function(e){return e.external}))[0];if(n){var i=t.closest("[data-surveyjs-wrapper]").querySelector("[data-surveyjs-external]");i.setAttribute("data-question-id",n.id),n.answers.forEach((function(t,r){var a=i.querySelectorAll("[data-field]")[r],s={id:"".concat(t.type,"-").concat(e.id,"-").concat(n.id,"-").concat(t.id),type:t.type,value:t.value,required:!!n.required};Object.keys(s).forEach((function(e){a[e]=s[e]}));var o=a.closest("[data-answer]");o.querySelector("label").setAttribute("for",s.id),o.querySelector("[data-label]").innerHTML=t.label,i.querySelector("[data-question]").innerHTML=n.question}))}},J=function(e,t){var r=sessionStorage.getObject(t.storageName);if(r){var a=e.closest("[data-surveyjs-wrapper]");t.storageArray=r,r.forEach((function(e){var t=a.querySelector('[name="'+e.name+'"]'),r=t.matches('[type="radio"], [type="checkbox"]'),s=r?a.querySelector('[name="'+e.name+'"][value="'+e.value+'"]'):t;r?s.checked=!0:s.value=e.value}))}},$=function(e){e.removeEventListener("fjs.field:validation",P),e.removeEventListener("fjs.form:submit",H)},G="3.0.0",U=function(e){i(r,e);var t=p(r);function r(e){var a,o,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(s(this,r),!n.url||"string"!=typeof n.url)throw new Error('"options.url" is missing or not a string!');var i=w({},r.prototype.options,n);T().isAvailable||(i.useWebStorage=!1);var c=d(o=t.call(this,e,i));c.internals=L,c.formEl.querySelector("[data-surveyjs-body]").insertAdjacentHTML("beforebegin",c.options.templates.loading);var l=y(c.options.url,c.options.initAjaxOptions).then((function(e){return"success"!==e.status.toLowerCase()?Promise.reject(e):new Promise((function(t){c.data=e.data,c.data.questions&&c.data.questions.length>0?(z(c.data,c.formEl,c.options,c.internals),c.options.useWebStorage&&J(c.formEl,c.internals),g(c.data),c.formEl.addEventListener("fjs.field:validation",P),c.formEl.addEventListener("fjs.form:submit",H),m((a=d(o),u(r.prototype)),"init",a).call(a).then((function(){c.isInitialized=!0,c.formEl.closest("[data-surveyjs-wrapper]").classList.add("surveyjs-init-success"),t(e)}))):t(e)}))})).finally((function(){var e=c.formEl.querySelector("[data-surveyjs-loading]");e&&e.parentNode.removeChild(e)}));return q(c.formEl,b.init,l),o}return n(r,[{key:"destroy",value:function(){$(this.formEl),m(u(r.prototype),"destroy",this).call(this)}}],[{key:"setOptions",value:function(e){r.prototype.options=w({},r.prototype.options,e)}}]),r}(r.default);return U.prototype.isInitialized=!1,U.prototype.options=N,U.prototype.version=G,U}(Form);
//# sourceMappingURL=surveyjs.min.js.map
